
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://xuan-insr.github.io/cpp/cpp_restart/4_class_1/">
      
      
        <link rel="prev" href="../3_oop/">
      
      
        <link rel="next" href="../5_class_2/">
      
      <link rel="icon" href="../../../logo.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.3">
    
    
      
        <title>4 ç±» (I) - å®šä¹‰ã€æˆå‘˜ã€æ„é€ ã€ææ„ - å’¸é±¼æš„çš„ä»£ç ç©ºé—´</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.c4a75a56.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Serif SC";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../from_oi_wiki/css/extra.css?v=13">
    
      <link rel="stylesheet" href="../../../css/status.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-JT9BRCXKJJ"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-JT9BRCXKJJ",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-JT9BRCXKJJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#4-ç±»-i---å®šä¹‰æˆå‘˜æ„é€ ææ„" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href="../../.." title="å’¸é±¼æš„çš„ä»£ç ç©ºé—´" class="md-header__button md-logo" aria-label="å’¸é±¼æš„çš„ä»£ç ç©ºé—´" data-md-component="logo">
      
  <img src="../../../logo.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            å’¸é±¼æš„çš„ä»£ç ç©ºé—´
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              4 ç±» (I) - å®šä¹‰ã€æˆå‘˜ã€æ„é€ ã€ææ„
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/xuan-insr/xuan-insr.github.io" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    xuan-insr/å’¸é±¼æš„çš„ä»£ç ç©ºé—´
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="æ ‡ç­¾" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        ğŸ¡ ä¸»é¡µ
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        C++
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../pl/" class="md-tabs__link">
        PL & ç¼–è¯‘
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/" class="md-tabs__link">
        æ ¸å¿ƒçŸ¥è¯†
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../%E5%AE%89%E5%85%A8/" class="md-tabs__link">
        å®‰å…¨
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" class="md-tabs__link">
      è¯­è¨€åŸºç¡€
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../other_courses/" class="md-tabs__link">
        å…¶ä»–è¯¾ç¨‹
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../%E6%9D%82%E9%A1%B9/" class="md-tabs__link">
        æ‚é¡¹
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../%E7%94%9F%E6%B4%BB/" class="md-tabs__link">
        ç”Ÿæ´»
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="å’¸é±¼æš„çš„ä»£ç ç©ºé—´" class="md-nav__button md-logo" aria-label="å’¸é±¼æš„çš„ä»£ç ç©ºé—´" data-md-component="logo">
      
  <img src="../../../logo.ico" alt="logo">

    </a>
    å’¸é±¼æš„çš„ä»£ç ç©ºé—´
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/xuan-insr/xuan-insr.github.io" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    xuan-insr/å’¸é±¼æš„çš„ä»£ç ç©ºé—´
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../..">ğŸ¡ ä¸»é¡µ</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          ğŸ¡ ä¸»é¡µ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E4%B8%BB%E9%A1%B5/about/" class="md-nav__link">
        â¤ï¸ æˆ‘å’Œæœ‹å‹ä»¬ï¼
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../recent/" class="md-nav__link">
        ğŸ“† æœ€è¿‘æ›´æ–°
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">C++</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          C++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">ğŸ‰C++ å­¦ä¹ è®°å½•</a>
          
            <label for="__nav_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          ğŸ‰C++ å­¦ä¹ è®°å½•
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
          æœ‹è¾ˆè¾…å­¦ slides ä¸éšæ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_2">
          <span class="md-nav__icon md-icon"></span>
          æœ‹è¾ˆè¾…å­¦ slides ä¸éšæ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://xuan-insr.github.io/slides/cpp/1_birth_and_oop/" class="md-nav__link">
        Week1 C++ çš„è¯ç”Ÿä¸é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../review/week1/" class="md-nav__link">
        Week1 å†…å®¹å›é¡¾
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://xuan-insr.github.io/slides/cpp/2_class_I/" class="md-nav__link">
        Week2 ç±»(I) å®šä¹‰ã€æˆå‘˜ã€æ„é€ ã€ææ„
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../review/week2/" class="md-nav__link">
        Week2 æ€è€ƒé¢˜ä¸å¤ä¹ é¢˜
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_3" id="__nav_2_2_3_label" tabindex="0">
          æ­£æ–‡ï¼
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_2_3">
          <span class="md-nav__icon md-icon"></span>
          æ­£æ–‡ï¼
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1_birth/" class="md-nav__link">
        1 C++ çš„è¯ç”Ÿ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2_paradigm/" class="md-nav__link">
        2 ç¼–ç¨‹èŒƒå¼
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3_oop/" class="md-nav__link">
        3 é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          4 ç±» (I) - å®šä¹‰ã€æˆå‘˜ã€æ„é€ ã€ææ„
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        4 ç±» (I) - å®šä¹‰ã€æˆå‘˜ã€æ„é€ ã€ææ„
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#41-ç±»çš„å®šä¹‰" class="md-nav__link">
    4.1 ç±»çš„å®šä¹‰
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-å£°æ˜ä¸å®šä¹‰" class="md-nav__link">
    â–² å£°æ˜ä¸å®šä¹‰
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#42-ç±»çš„æˆå‘˜" class="md-nav__link">
    4.2 ç±»çš„æˆå‘˜
  </a>
  
    <nav class="md-nav" aria-label="4.2 ç±»çš„æˆå‘˜">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#this-æŒ‡é’ˆ" class="md-nav__link">
    this æŒ‡é’ˆ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-inline-å‡½æ•°" class="md-nav__link">
    â–² inline å‡½æ•°
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#43-æ„é€ å‡½æ•°" class="md-nav__link">
    4.3 æ„é€ å‡½æ•°
  </a>
  
    <nav class="md-nav" aria-label="4.3 æ„é€ å‡½æ•°">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#åŠ¨æ€å†…å­˜åˆ†é…" class="md-nav__link">
    åŠ¨æ€å†…å­˜åˆ†é…
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½" class="md-nav__link">
    â–² å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½
  </a>
  
    <nav class="md-nav" aria-label="â–² å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#é»˜è®¤å‚æ•°" class="md-nav__link">
    é»˜è®¤å‚æ•°
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#å‡½æ•°é‡è½½" class="md-nav__link">
    å‡½æ•°é‡è½½
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#43-æ„é€ å‡½æ•°-cont" class="md-nav__link">
    4.3 æ„é€ å‡½æ•° (Cont.)
  </a>
  
    <nav class="md-nav" aria-label="4.3 æ„é€ å‡½æ•° (Cont.)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implicitly-declared-default-constructor" class="md-nav__link">
    implicitly-declared default constructor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#member-initializer-lists" class="md-nav__link">
    member initializer lists
  </a>
  
    <nav class="md-nav" aria-label="member initializer lists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delegating-constructor" class="md-nav__link">
    delegating constructor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-member-initializer" class="md-nav__link">
    default member initializer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#44-ææ„å‡½æ•°" class="md-nav__link">
    4.4 ææ„å‡½æ•°
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#45-æ„é€ å’Œææ„çš„æ—¶æœºå’Œé¡ºåº" class="md-nav__link">
    4.5 æ„é€ å’Œææ„çš„æ—¶æœºå’Œé¡ºåº
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#46-å°ç»“" class="md-nav__link">
    4.6 å°ç»“
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../5_class_2/" class="md-nav__link">
        5 ç±» (II) - æ‹·è´æ„é€ ä¸æ‹·è´èµ‹å€¼
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../6_class_3/" class="md-nav__link">
        6 ç±» (III) - è½¬æ¢æ„é€ å‡½æ•°
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7_class_4/" class="md-nav__link">
        7 ç±» (IV) - const å’Œ static æˆå‘˜
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../8_class_5/" class="md-nav__link">
        8 ç±» (V) - ç»§æ‰¿ä¸æŠ½è±¡ç±»ã€è®¿é—®æ§åˆ¶
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../9_template/" class="md-nav__link">
        9 æ¨¡æ¿
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10_stl/" class="md-nav__link">
        10 STL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11_move_semantics/" class="md-nav__link">
        11 å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../12_class_6/" class="md-nav__link">
        12 ç±» (VI) - ç§»åŠ¨æ„é€ ä¸ç§»åŠ¨èµ‹å€¼
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../13_namespace/" class="md-nav__link">
        13 namespace
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../14_exception/" class="md-nav__link">
        14 exception
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_4" id="__nav_2_2_4_label" tabindex="0">
          A é™„å½•
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_4">
          <span class="md-nav__icon md-icon"></span>
          A é™„å½•
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/decl_and_def/" class="md-nav__link">
        å£°æ˜ä¸å®šä¹‰
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/inline_functions/" class="md-nav__link">
        inline å‡½æ•°
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/func_overload/" class="md-nav__link">
        å‡½æ•°é»˜è®¤å‚æ•°ä¸é‡è½½
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/operator_overload/" class="md-nav__link">
        è¿ç®—ç¬¦é‡è½½
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/references/" class="md-nav__link">
        å¼•ç”¨
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/iostream/" class="md-nav__link">
        I/O stream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/copy_elision/" class="md-nav__link">
        copy elision
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/cast/" class="md-nav__link">
        ç±»å‹è½¬æ¢
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/bool/" class="md-nav__link">
        bool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/auto/" class="md-nav__link">
        auto
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/undefined_behavior/" class="md-nav__link">
        æœªå®šä¹‰è¡Œä¸º
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/string/" class="md-nav__link">
        std::string
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/smart_pointers/" class="md-nav__link">
        æ™ºèƒ½æŒ‡é’ˆ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../appendix/lambda/" class="md-nav__link">
        lambda
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_5" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_5" id="__nav_2_2_5_label" tabindex="0">
          B æ€»ç»“
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_5">
          <span class="md-nav__icon md-icon"></span>
          B æ€»ç»“
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../summaries/member_init_lists/" class="md-nav__link">
        member initializer lists
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_6" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_6" id="__nav_2_2_6_label" tabindex="0">
          ä¸€äº›ç¬”è®°å’Œ TODO
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_6">
          <span class="md-nav__icon md-icon"></span>
          ä¸€äº›ç¬”è®°å’Œ TODO
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notes/notes/" class="md-nav__link">
        é›¶æ•£å†…å®¹è®°å½•
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notes/dne_notes/" class="md-nav__link">
        The Design and Evaluation of C++ é˜…è¯»è®°å½•
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notes/std_notes/" class="md-nav__link">
        C++ è¯­è¨€æ ‡å‡†é˜…è¯»è®°å½•
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notes/guideline_notes/" class="md-nav__link">
        C++ Core Guidelines é˜…è¯»è®°å½•
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notes/bs_faq_notes/" class="md-nav__link">
        Bjarne Stroustrup's FAQ é˜…è¯»è®°å½•
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cpp_for_contests/" class="md-nav__link">
        å¿«é€Ÿå…¥é—¨ C++ å†™é¢˜
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          C++ çŸ¥è¯†è¡¥å……
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          C++ çŸ¥è¯†è¡¥å……
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%90%86%E8%A7%A3%20STL%20-%20%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/" class="md-nav__link">
        ç†è§£ STL â€”â€” è¿­ä»£å™¨ä¸å‡½æ•°å¯¹è±¡
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../pl/">PL & ç¼–è¯‘</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          PL & ç¼–è¯‘
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../pl/ppl_notes/">ç¼–ç¨‹è¯­è¨€åŸç†</a>
          
            <label for="__nav_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          ç¼–ç¨‹è¯­è¨€åŸç†
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/0_PPL_Final_Problem1/" class="md-nav__link">
        æˆ‘åœ¨ PPL 2022 Final å‡ºçš„å¤ä¹ é¢˜
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
          Part I - Judgments and Rules | åˆ¤æ–­ä¸è§„åˆ™
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          Part I - Judgments and Rules | åˆ¤æ–­ä¸è§„åˆ™
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/1_Abstract_Syntax/" class="md-nav__link">
        1 æŠ½è±¡è¯­æ³•
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/2_Inductive_Definition/" class="md-nav__link">
        2 å½’çº³å®šä¹‰
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/3_Hypothetical_and_General_Judgments/" class="md-nav__link">
        3 å‡è¨€åˆ¤æ–­ä¸ä¸€èˆ¬æ€§åˆ¤æ–­
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_4" id="__nav_3_2_4_label" tabindex="0">
          Part II - Statics and Dynamics | é™æ€è¯­ä¹‰å’ŒåŠ¨æ€è¯­ä¹‰
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_4">
          <span class="md-nav__icon md-icon"></span>
          Part II - Statics and Dynamics | é™æ€è¯­ä¹‰å’ŒåŠ¨æ€è¯­ä¹‰
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/4_Statics/" class="md-nav__link">
        4 é™æ€è¯­ä¹‰
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/5_Dynamics/" class="md-nav__link">
        5 åŠ¨æ€è¯­ä¹‰
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/6_Type_Safety/" class="md-nav__link">
        6 ç±»å‹å®‰å…¨
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_5" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_5" id="__nav_3_2_5_label" tabindex="0">
          Part III - Total Functions | å…¨å‡½æ•°
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_5">
          <span class="md-nav__icon md-icon"></span>
          Part III - Total Functions | å…¨å‡½æ•°
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/8_Func_Def_and_Val/" class="md-nav__link">
        8 å‡½æ•°å®šä¹‰å’Œå€¼
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/9_Sys_T_of_Higher_Order_Recursion/" class="md-nav__link">
        9 é«˜é˜¶é€’å½’çš„ç³»ç»Ÿ T
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_6" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2_6" id="__nav_3_2_6_label" tabindex="0">
          Part IV - Finite Data Types | æœ‰é™æ•°æ®ç±»å‹
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_6">
          <span class="md-nav__icon md-icon"></span>
          Part IV - Finite Data Types | æœ‰é™æ•°æ®ç±»å‹
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/10_product_types/" class="md-nav__link">
        10 ç§¯ç±»å‹
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/ppl_notes/11_sum_types/" class="md-nav__link">
        11 å’Œç±»å‹
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compile_principle/" class="md-nav__link">
        ç¼–è¯‘åŸç†
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.yuque.com/xianyuxuan/coding/ocaml" class="md-nav__link">
        OCaml å…¥é—¨
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/">æ ¸å¿ƒçŸ¥è¯†</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          æ ¸å¿ƒçŸ¥è¯†
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
          æ“ä½œç³»ç»Ÿ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          æ“ä½œç³»ç»Ÿ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/I_overview/1_intro/" class="md-nav__link">
        1 å†™åœ¨å‰é¢
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/I_overview/2_overview/" class="md-nav__link">
        Part.1 æ¦‚è¿°
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
          Part.2 è¿›ç¨‹ç®¡ç†
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_3">
          <span class="md-nav__icon md-icon"></span>
          Part.2 è¿›ç¨‹ç®¡ç†
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/II_process_management/3_process/" class="md-nav__link">
        3 è¿›ç¨‹
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/II_process_management/4_sched/" class="md-nav__link">
        4 è°ƒåº¦
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/II_process_management/5_thread/" class="md-nav__link">
        5 çº¿ç¨‹
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_4" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2_4" id="__nav_4_2_4_label" tabindex="0">
          Part.3 è¿›ç¨‹åŒæ­¥
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_4">
          <span class="md-nav__icon md-icon"></span>
          Part.3 è¿›ç¨‹åŒæ­¥
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/III_process_sync/6_sync_tools/" class="md-nav__link">
        6 åŒæ­¥åŠå…¶å·¥å…·
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/III_process_sync/7_sync_examples/" class="md-nav__link">
        7 ç»å…¸åŒæ­¥é—®é¢˜
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/III_process_sync/8_deadlocks/" class="md-nav__link">
        8 æ­»é”
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_5" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2_5" id="__nav_4_2_5_label" tabindex="0">
          Part.4 å†…å­˜ç®¡ç†
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_5">
          <span class="md-nav__icon md-icon"></span>
          Part.4 å†…å­˜ç®¡ç†
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/IV_memory_management/9_main_memory/" class="md-nav__link">
        9 ä¸»å­˜
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/IV_memory_management/10_virtual_memory/" class="md-nav__link">
        10 è™šæ‹Ÿå†…å­˜
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_6" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2_6" id="__nav_4_2_6_label" tabindex="0">
          Part.5 å­˜å‚¨ç®¡ç†
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_6">
          <span class="md-nav__icon md-icon"></span>
          Part.5 å­˜å‚¨ç®¡ç†
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/V_storage_management/11_mass_storage/" class="md-nav__link">
        11 å¤§å®¹é‡å­˜å‚¨
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/V_storage_management/12_io_systems/" class="md-nav__link">
        12 I/O ç³»ç»Ÿ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_7" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2_7" id="__nav_4_2_7_label" tabindex="0">
          Part.6 æ–‡ä»¶ç³»ç»Ÿ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2_7">
          <span class="md-nav__icon md-icon"></span>
          Part.6 æ–‡ä»¶ç³»ç»Ÿ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/VI_file_system/13_fs_interface/" class="md-nav__link">
        13 æ–‡ä»¶ç³»ç»Ÿ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/VI_file_system/14_fs_impl/" class="md-nav__link">
        14 æ–‡ä»¶ç³»ç»Ÿå®ç°
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86/os/15_review/" class="md-nav__link">
        15 æ€»ç»“
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          è®¡ç®—æœºç»„æˆ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          è®¡ç®—æœºç»„æˆ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_organization/1_prelude/" class="md-nav__link">
        1 å†™åœ¨å‰é¢
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_organization/2_instructions/" class="md-nav__link">
        2 Instructions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_organization/3_arithmetic/" class="md-nav__link">
        3 Arithmetic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_organization/4_processor/" class="md-nav__link">
        4 Processor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_organization/5_cache/" class="md-nav__link">
        5 Cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_organization/6_IO/" class="md-nav__link">
        6 I/O
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/" class="md-nav__link">
        2022 å›å¿†å·
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../compile_principle/">ç¼–è¯‘åŸç†</a>
          
            <label for="__nav_4_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          ç¼–è¯‘åŸç†
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compile_principle/1%20Lexical%20Analysis/" class="md-nav__link">
        I è¯æ³•åˆ†æ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compile_principle/2%20Parsing%20%28I%29/" class="md-nav__link">
        II è¯­æ³•åˆ†æ - è‡ªé¡¶å‘ä¸‹åˆ†æ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compile_principle/3%20Parsing%20%28II%29/" class="md-nav__link">
        III è¯­æ³•åˆ†æ - è‡ªåº•å‘ä¸Šåˆ†æ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compile_principle/4%20Semantic%20Analysis/" class="md-nav__link">
        IV è¯­ä¹‰åˆ†æ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compile_principle/5%20Runtime%20Environment/" class="md-nav__link">
        V è¿è¡Œæ—¶ç¯å¢ƒ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../compile_principle/6%20Code%20Generation/" class="md-nav__link">
        VI ä»£ç ç”Ÿæˆ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../math_ds_algo/">æ•°å­¦ã€æ•°æ®ç»“æ„å’Œç®—æ³•</a>
          
            <label for="__nav_4_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          æ•°å­¦ã€æ•°æ®ç»“æ„å’Œç®—æ³•
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../math_ds_algo/getting_started/" class="md-nav__link">
        å…¥é—¨è·¯çº¿
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../%E5%AE%89%E5%85%A8/">å®‰å…¨</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          å®‰å…¨
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.yuque.com/xianyuxuan/coding/crypto" class="md-nav__link">
        å¯†ç å­¦
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.yuque.com/xianyuxuan/coding/advcrypto" class="md-nav__link">
        å¯†ç å­¦è¿›é˜¶
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.yuque.com/xianyuxuan/coding/softwsec" class="md-nav__link">
        è½¯ä»¶å®‰å…¨
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.yuque.com/xianyuxuan/coding/netsec" class="md-nav__link">
        ç½‘ç»œå®‰å…¨åŸç†ä¸å®è·µ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.yuque.com/xianyuxuan/coding/syssec" class="md-nav__link">
        ç³»ç»Ÿå®‰å…¨
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.yuque.com/xianyuxuan/coding/wireless_iot" class="md-nav__link">
        æ— çº¿ä¸ç‰©è”ç½‘å®‰å…¨åŸºç¡€
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.yuque.com/xianyuxuan/coding/signal_processing" class="md-nav__link">
        é¢å‘ä¿¡æ¯å®‰å…¨çš„ä¿¡å·å¤„ç†
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        è¯­è¨€åŸºç¡€
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../other_courses/">å…¶ä»–è¯¾ç¨‹</a>
          
            <label for="__nav_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          å…¶ä»–è¯¾ç¨‹
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../other_courses/theory_of_computation/" class="md-nav__link">
        è®¡ç®—ç†è®º
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../%E6%9D%82%E9%A1%B9/">æ‚é¡¹</a>
          
            <label for="__nav_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          æ‚é¡¹
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%9D%82%E9%A1%B9/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        åšå®¢æ­å»ºè®°å½•
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../%E7%94%9F%E6%B4%BB/">ç”Ÿæ´»</a>
          
            <label for="__nav_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          ç”Ÿæ´»
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
          è®¨é¥­å†ç¨‹
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          è®¨é¥­å†ç¨‹
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interviews/overview/" class="md-nav__link">
        ğŸ³ï¸â€ğŸŒˆ æ€»è§ˆ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interviews/pdd/" class="md-nav__link">
        ğŸ˜• æ‹¼å¤šå¤š
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interviews/meituan/" class="md-nav__link">
        ğŸ¤— ç¾å›¢
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interviews/mayi/" class="md-nav__link">
        ğŸ¤” èš‚èš
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interviews/huawei/" class="md-nav__link">
        ğŸ‘ åä¸º
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interviews/bytedance/" class="md-nav__link">
        ğŸ¥³ å­—èŠ‚
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interviews/quant/" class="md-nav__link">
        ğŸ‘¨â€ğŸ’» é‡åŒ–ç›¸å…³
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../interviews/others/" class="md-nav__link">
        å…¶ä»–
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%94%9F%E6%B4%BB/%E6%88%91%E9%9C%80%E8%A6%81%E4%B8%80%E4%B8%AA%E5%A4%96%E7%BD%AE%E5%A4%A7%E8%84%91/" class="md-nav__link">
        æˆ‘éœ€è¦ä¸€ä¸ªå¤–ç½®å¤§è„‘
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%94%9F%E6%B4%BB/%E4%BA%B2%E5%AF%86%E5%85%B3%E7%B3%BB/" class="md-nav__link">
        å…³äºäº²å¯†å…³ç³»çš„ç¢ç¢å¿µ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%94%9F%E6%B4%BB/2022/" class="md-nav__link">
        2022 å¹´ç»ˆæ€»ç»“
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E7%94%9F%E6%B4%BB/%E5%9B%9E%E9%A1%BE%E5%9C%A8%E4%BF%A1%E5%AE%89%E7%9A%84%E4%B8%89%E5%B9%B4/" class="md-nav__link">
        å›é¡¾åœ¨ä¿¡å®‰çš„ä¸‰å¹´
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_7" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../%E6%A1%8C%E6%B8%B8/">æ¡Œæ¸¸</a>
          
            <label for="__nav_9_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9_7">
          <span class="md-nav__icon md-icon"></span>
          æ¡Œæ¸¸
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%A1%8C%E6%B8%B8/components/" class="md-nav__link">
        é…ä»¶ç›¸å…³
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#41-ç±»çš„å®šä¹‰" class="md-nav__link">
    4.1 ç±»çš„å®šä¹‰
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-å£°æ˜ä¸å®šä¹‰" class="md-nav__link">
    â–² å£°æ˜ä¸å®šä¹‰
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#42-ç±»çš„æˆå‘˜" class="md-nav__link">
    4.2 ç±»çš„æˆå‘˜
  </a>
  
    <nav class="md-nav" aria-label="4.2 ç±»çš„æˆå‘˜">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#this-æŒ‡é’ˆ" class="md-nav__link">
    this æŒ‡é’ˆ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-inline-å‡½æ•°" class="md-nav__link">
    â–² inline å‡½æ•°
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#43-æ„é€ å‡½æ•°" class="md-nav__link">
    4.3 æ„é€ å‡½æ•°
  </a>
  
    <nav class="md-nav" aria-label="4.3 æ„é€ å‡½æ•°">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#åŠ¨æ€å†…å­˜åˆ†é…" class="md-nav__link">
    åŠ¨æ€å†…å­˜åˆ†é…
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½" class="md-nav__link">
    â–² å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½
  </a>
  
    <nav class="md-nav" aria-label="â–² å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#é»˜è®¤å‚æ•°" class="md-nav__link">
    é»˜è®¤å‚æ•°
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#å‡½æ•°é‡è½½" class="md-nav__link">
    å‡½æ•°é‡è½½
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#43-æ„é€ å‡½æ•°-cont" class="md-nav__link">
    4.3 æ„é€ å‡½æ•° (Cont.)
  </a>
  
    <nav class="md-nav" aria-label="4.3 æ„é€ å‡½æ•° (Cont.)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implicitly-declared-default-constructor" class="md-nav__link">
    implicitly-declared default constructor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#member-initializer-lists" class="md-nav__link">
    member initializer lists
  </a>
  
    <nav class="md-nav" aria-label="member initializer lists">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delegating-constructor" class="md-nav__link">
    delegating constructor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-member-initializer" class="md-nav__link">
    default member initializer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#44-ææ„å‡½æ•°" class="md-nav__link">
    4.4 ææ„å‡½æ•°
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#45-æ„é€ å’Œææ„çš„æ—¶æœºå’Œé¡ºåº" class="md-nav__link">
    4.5 æ„é€ å’Œææ„çš„æ—¶æœºå’Œé¡ºåº
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#46-å°ç»“" class="md-nav__link">
    4.6 å°ç»“
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="4-ç±»-i---å®šä¹‰æˆå‘˜æ„é€ ææ„">4 ç±» (I) - å®šä¹‰ã€æˆå‘˜ã€æ„é€ ã€ææ„<a class="headerlink" href="#4-ç±»-i---å®šä¹‰æˆå‘˜æ„é€ ææ„" title="Permanent link">&para;</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8V2m6.78 1a.69.69 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38-2.5-2.5Z"/></svg></span> çº¦ 4642 ä¸ªå­— <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg></span> 243 è¡Œä»£ç  <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3L12.5 13Z"/></svg></span> é¢„è®¡é˜…è¯»æ—¶é—´ 19 åˆ†é’Ÿ</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>ä»æœ¬èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬åœ¨éƒ¨åˆ†å†…å®¹ä¼šå°è¯•ç›´æ¥ä½¿ç”¨ standard çš„ç›¸åº”å†…å®¹è®²è§£<sup id="fnref:std_version"><a class="footnote-ref" href="#fn:std_version">1</a></sup>ã€‚ç”±äºä¼šæ¶‰åŠåˆ°ä¸€äº›å°šæœªè®¨è®ºçš„å†…å®¹ï¼Œå› æ­¤è¿™äº›å†…å®¹æˆ‘ä»¬ä¼šé€šè¿‡è„šæ³¨çš„æ–¹å¼ç»™å‡ºã€‚åˆå­¦è€…å¯ä»¥å¿½ç•¥è¿™äº›è„šæ³¨ã€‚</p>
<p>å› æ­¤ï¼Œä»æœ¬èŠ‚å¼€å§‹ï¼Œç±»ä¼¼æœ¬èŠ‚è¿™æ ·æœ‰æ¯”è¾ƒå¤§é‡çš„å‚è€ƒèµ„æ–™æ ‡æ³¨å’Œè„šæ³¨çš„æ–‡ç« ï¼Œä¼šæä¾›ä¸‹é¢çš„æŒ‰é’®æ¥å¸®åŠ©æé«˜é˜…è¯»è´¨é‡ï¼ˆæ–‡æœ«ä¹Ÿä¼šæœ‰ä¸€ä»½ï¼‰ï¼š</p>
<p><script>
function inFootnote(element) {
    let parent = element.parentNode;
    while (parent !== null) {
      if (parent.classList &amp;&amp; parent.classList.contains("footnote")) {
        break;
      }
      parent = parent.parentNode;
    }
    return parent !== null;
}
</script>
<script>
function toggleVisibility() {
  const links = document.querySelectorAll('a');
  const buttons = document.querySelectorAll('.xyx-toggle');
  links.forEach(link =&gt; {
    if (!link.classList.contains('md-nav__link') &amp;&amp;
        !link.classList.contains('md-tabs__link') &amp;&amp;
        !link.classList.contains('md-source') &amp;&amp;
        !link.classList.contains('md-header__button') &amp;&amp;
        !link.closest('.md-nav__link') &amp;&amp;
        !link.closest('.md-tabs__link') &amp;&amp;
        !link.closest('.md-source') &amp;&amp;
        !link.closest('.footnote-backref') &amp;&amp;
        !link.closest('.footnote-ref') &amp;&amp;
        !link.closest('.md-header__button') &amp;&amp;
        !inFootnote(link)
        ) {
      if (link.style.display === 'none') {
        link.style.display = 'inline';
        for (const button of buttons) {
            button.innerHTML = 'ç‚¹å‡»æ­¤å¤„éšè—æ­£æ–‡æ‰€æœ‰é“¾æ¥';
        }
      } else {
        link.style.display = 'none';
        for (const button of buttons) {
            button.innerHTML = 'ç‚¹å‡»æ­¤å¤„æ˜¾ç¤ºæ­£æ–‡æ‰€æœ‰é“¾æ¥';
        }
      }
    }
  });
}
</script>
<script>
function toggleVisibilityFoot() {
  const links = document.querySelectorAll('a');
  const buttons = document.querySelectorAll('.xyx-toggle2');
  links.forEach(link =&gt; {
    if (link.closest('.footnote-backref') ||
        link.closest('.footnote-ref')) {
      if (link.style.display === 'none') {
        link.style.display = 'inline';
        for (const button of buttons) {
            button.innerHTML = 'ç‚¹å‡»æ­¤å¤„éšè—æœ¬æ–‡æ‰€æœ‰è„šæ³¨';
        }
      } else {
        link.style.display = 'none';
        for (const button of buttons) {
            button.innerHTML = 'ç‚¹å‡»æ­¤å¤„æ˜¾ç¤ºæœ¬æ–‡æ‰€æœ‰è„šæ³¨';
        }
      }
    }
  });</p>
<p>const footnotes = document.querySelectorAll('.footnote');
  for (const footnote of footnotes) {
    if (footnote.style.display === 'none') {
      footnote.style.removeProperty('display');
    } else {
      footnote.style.display = 'none';
    }
  }
}
</script></p>
<p><center>
<button onclick="toggleVisibility()" class="box box-yellow xyx-toggle">ç‚¹å‡»æ­¤å¤„éšè—æ­£æ–‡æ‰€æœ‰é“¾æ¥</button>
<button onclick="toggleVisibilityFoot()" class="box box-green xyx-toggle2">ç‚¹å‡»æ­¤å¤„éšè—æœ¬æ–‡æ‰€æœ‰è„šæ³¨</button>
</center></p>
</div>
<div class="admonition warning">
<p class="admonition-title">æœ¬èŠ‚ä½¿ç”¨çš„å‰¯æœ¬</p>
<p>è‡ªæœ¬èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬ä¼šåœ¨è®²è§£ç±»ç›¸å…³çš„å†…å®¹æ—¶ï¼Œå¼•å…¥ä¸€äº› C++ è¯­æ³•è¯´æ˜ã€‚è¿™äº›è¯´æ˜æœ‰çš„æ˜¯é˜æ˜å®¹æ˜“æ··æ·†çš„æ¦‚å¿µï¼Œæœ‰çš„æ˜¯ä»‹ç» C++ ç›¸å¯¹äº C çš„æ–°è¯­æ³•ã€‚è¿™äº›ç« èŠ‚ç”¨ â–² è¡¨ç¤ºã€‚å®ƒä»¬ä»ç„¶æ˜¯æ–‡ç« çš„é‡è¦éƒ¨åˆ†ï¼Œä½†ç”±äºæœ¬èº«è¯é¢˜ç›¸å¯¹ç‹¬ç«‹ï¼Œå› æ­¤å•ç‹¬åœ¨å¯¼èˆªç›®å½•ä¸­çš„ã€ŒA é™„å½•ã€ä¸€èŠ‚ä¸­å±•ç¤ºï¼›æ­£æ–‡é‡Œçš„æ˜¯æ’ä»¶å¼•å…¥çš„å‰¯æœ¬ï¼Œå› æ­¤æœ¬æ–‡çš„å­—æ•°ç»Ÿè®¡å¹¶ä¸åŒ…å«è¿™äº›å‰¯æœ¬ã€‚</p>
<p>æœ¬èŠ‚å¼•å…¥çš„å‰¯æœ¬åŒ…æ‹¬ï¼š</p>
<ul>
<li><a href="../appendix/decl_and_def">å£°æ˜ä¸å®šä¹‰</a></li>
<li><a href="../appendix/inline_functions">inline å‡½æ•°</a></li>
<li><a href="../appendix/func_overload">å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½</a></li>
</ul>
</div>
<h2 id="41-ç±»çš„å®šä¹‰">4.1 ç±»çš„å®šä¹‰<a class="headerlink" href="#41-ç±»çš„å®šä¹‰" title="Permanent link">&para;</a></h2>
<p>æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚å·²ç»çœ‹åˆ°äº†ç±»çš„å®šä¹‰çš„ä¸€äº›å…·ä½“ä¾‹å­ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Textbox</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">text</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">penwidth</span><span class="p">;</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">do_draw</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">old_penwidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_penwidth</span><span class="p">();</span>
<span class="w">        </span><span class="n">set_penwidth</span><span class="p">(</span><span class="n">penwidth</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// ç”»å‡ºæ–‡æœ¬æ¡†å’Œæ–‡æœ¬å†…å®¹</span>
<span class="w">        </span><span class="n">set_penwidth</span><span class="p">(</span><span class="n">old_penwidth</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>åœ¨ C++ ä¸­ï¼Œæ¯ä¸ªç±»çš„å®šä¹‰ (class definition) å¼•å…¥ä¸€ä¸ªæ–°çš„ç±»å‹<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.name#1">class.name#1</a></sup>ã€‚å› æ­¤ï¼Œæœ‰äº†ä¸Šé¢çš„å®šä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨å®ƒæ¥å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå¦‚ <code>Textbox tb;</code> å£°æ˜å¹¶å®šä¹‰<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/basic.def#2">basic.def#2</a></sup>äº†ä¸€ä¸ªç±»å‹ä¸º <code>Textbox</code>ï¼Œåä¸º <code>tb</code> çš„å˜é‡ã€‚</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>åœ¨ C++ ä¸­ï¼Œç”¨ç±»æ¥å®šä¹‰å˜é‡æ—¶ï¼Œä¸å¿…åƒ C è¯­è¨€é‚£æ ·å¸¦æœ‰ <code>struct</code> å…³é”®å­—ã€‚å³ï¼Œå¦‚æœæœ‰ <code>class Foo</code> æˆ–è€… <code>struct Bar</code> çš„å®šä¹‰ï¼Œé‚£ä¹ˆ <code>Foo x;</code>, <code>class Foo x;</code>, <code>Bar b;</code>, <code>struct Bar b;</code> éƒ½æ˜¯åˆæ³•çš„å£°æ˜è¯­å¥ã€‚è¿™æ˜¯å› ä¸ºï¼Œä» C with Classes è®¾è®¡ä¹‹åˆå°±å¸Œæœ›è®©ç”¨æˆ·å®šä¹‰çš„ç±»å‹ä¸æ˜¯äºŒç­‰å…¬æ°‘ï¼Œè€Œæ˜¯èƒ½è¢«ä¸å†…ç½®ç±»å‹ä¸€æ ·çš„æ–¹å¼ä½¿ç”¨ã€‚</p>
<details class="tips">
<summary>Elaborated type specifiers</summary>
<p>å¸¦æœ‰ <code>struct</code> æˆ–è€… <code>class</code> å…³é”®å­—çš„ç±»å‹å (å¦‚ <code>class Foo</code>) å«åš Elaborated type specifiers<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/dcl.type.elab">dcl.type.elab</a></sup>ã€‚</p>
<p>åœ¨ C è¯­è¨€ä¸­ï¼Œç±»ä¼¼ <code>struct x {}; int x;</code> æ˜¯ç¬¦åˆè¯­æ³•çš„ï¼šè™½ç„¶è¿™ä¼šä½¿å¾—åå­— <code>x</code> æ—¢è¡¨ç¤ºä¸€ä¸ªç»“æ„ä½“ï¼Œåˆè¡¨ç¤ºä¸€ä¸ªå˜é‡ï¼›ä½†åœ¨ C è¯­è¨€ä¸­è¿™ä¸ä¼šå¼•èµ·æ­§ä¹‰ï¼Œå› ä¸ºå½“ <code>x</code> è¡¨ç¤ºç»“æ„ä½“æ—¶å¿…é¡»å¸¦ä¸Š <code>struct</code> å…³é”®å­—ã€‚ä¸è¿‡åœ¨ C++ ä¸­ï¼Œç›´æ¥ä½¿ç”¨ <code>x</code> å°±åªèƒ½å¼•ç”¨åˆ°å˜é‡ <code>x</code> äº†ï¼Œå› ä¸ºæ­¤æ—¶ <code>int x;</code> çš„ <code>x</code> hides <code>struct x {};</code> çš„ <code>x</code><sup><a href="https://timsong-cpp.github.io/cppwp/n4868/basic.scope.hiding">basic.scope.hiding</a></sup>ã€‚</p>
<p>ä½†æ˜¯ä¸ºäº†å…¼å®¹ Cï¼ŒC++ å¹¶æ²¡æœ‰ç¦æ­¢ä¸Šè¿°å†™æ³•ï¼Œè€Œæ˜¯è§„å®šå¯ä»¥é€šè¿‡ Elaborated type specifiers æ˜¾å¼åœ°æ¥ä½¿ç”¨ç»“æ„ä½“ <code>x</code>ï¼Œå³ä½¿ç”¨ <code>struct x</code><sup><a href="https://timsong-cpp.github.io/cppwp/n4868/basic.lookup.elab#1">basic.lookup.elab#1</a>,<a href="https://timsong-cpp.github.io/cppwp/n4868/class.name#2">class.name#2</a></sup>ï¼›å¯¹ <code>class</code> ä¹Ÿä¸€æ ·ã€‚</p>
<p>Elaborated type specifiers è¿˜åœ¨ forward declaration ä»¥åŠ enum ä¸­æœ‰ç”¨é€”ã€‚</p>
</details>
</div>
<p>å…·ä½“æ¥è¯´ï¼Œç±»çš„å®šä¹‰å…·æœ‰å¦‚ä¸‹å½¢å¼<sup id="fnref:class-specifier"><a class="footnote-ref" href="#fn:class-specifier">2</a></sup><sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.pre#1">class.pre#1,2</a></sup>ï¼š</p>
<p><center><img alt="" src="../2023-02-09-20-19-03.png" width="600" /></center></p>
<ol>
<li>è¿™é‡Œçš„ opt æŒ‡æ˜æŸä¸ªå…ƒç´ æ˜¯å¯é€‰çš„ã€‚ä¾‹å¦‚ï¼Œclass-specifier: class-head { member-specification<sub>opt</sub> } è¯´æ˜ class-specifier ä¸­å¯ä»¥æ²¡æœ‰ member-specificationï¼Œä¾‹å¦‚ <code>class Foo {}</code> æˆ–è€… <code>class A : public B {}</code> ä¹‹ç±»çš„ã€‚</li>
<li>è¿™é‡Œçš„ class-name æ˜¯ä¸€ä¸ª identifier<sup id="fnref:class-name"><a class="footnote-ref" href="#fn:class-name">3</a></sup>ï¼Œä¾‹å¦‚ä¸Šé¢çš„ <code>Foo</code> å’Œ <code>A</code>ã€‚</li>
<li>è¿™é‡Œçš„ class-key å†³å®šäº†ç±»æ˜¯å¦æ˜¯ä¸€ä¸ª unionï¼Œä»¥åŠé»˜è®¤æƒ…å†µä¸‹æˆå‘˜æ˜¯ public çš„è¿˜æ˜¯ private çš„ã€‚union ä¸€æ¬¡æœ€å¤šä¿å­˜ä¸€ä¸ªæ•°æ®æˆå‘˜çš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ C++ ä¸­ï¼Œstruct, class, union éƒ½æ˜¯ç±»ã€‚ä½†æ˜¯åœ¨æœ¬èŠ‚çš„åç»­è®¨è®ºä¸­ï¼Œæˆ‘ä»¬æš‚æ—¶åªè®¨è®º struct å’Œ classã€‚</li>
<li>è¿™é‡Œçš„ attribute-specifier-seq å’Œ class-virt-specifier ç°åœ¨æš‚æ—¶ä¸ç”¨ç®¡ã€‚</li>
<li>è¿™é‡Œçš„ base-clause å®šä¹‰ä¸º <code>base-clause : base-specifier-list</code>ï¼Œæ˜¯ç”¨æ¥å¤„ç†æ´¾ç”Ÿç±»çš„ã€‚ä¾‹å¦‚ 1 ä¸­çš„ <code>: public B</code>ã€‚</li>
<li>è¿™é‡Œçš„ nested-name-specifier æ˜¯ <code>::</code> æˆ–è€… <code>Foo::</code> ä¹‹ç±»çš„ä¸œè¥¿ï¼Œå…¶æ„ä¹‰å¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­<sup id="fnref:refer_to_same"><a class="footnote-ref" href="#fn:refer_to_same">4</a></sup><sup id="fnref:nonzero_size"><a class="footnote-ref" href="#fn:nonzero_size">5</a></sup>ï¼š<br />
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">https://godbolt.org/z/shjxaKhxc</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Inner</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">};</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Outer</span><span class="w"> </span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">Inner</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="n">Outer</span><span class="o">::</span><span class="n">Inner</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">    </span><span class="n">Inner</span><span class="w"> </span><span class="n">i2</span><span class="p">;</span>
<span class="w">    </span><span class="o">::</span><span class="n">Inner</span><span class="w"> </span><span class="n">i3</span><span class="p">;</span><span class="w">     </span><span class="c1">// global Inner</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">A</span><span class="p">;</span><span class="w">       </span><span class="c1">// declares struct Outer::A</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">Outer</span><span class="o">::</span><span class="n">A</span><span class="w"> </span><span class="p">{};</span><span class="w"> </span><span class="c1">// defines struct Outer::A</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Outer</span><span class="w"> </span><span class="n">o</span><span class="p">;</span>
<span class="w">    </span><span class="n">Inner</span><span class="w"> </span><span class="n">i4</span><span class="p">;</span>
<span class="w">    </span><span class="n">Outer</span><span class="o">::</span><span class="n">Inner</span><span class="w"> </span><span class="n">i5</span><span class="p">;</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d %d %d %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">i2</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">i3</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">i4</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">i5</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Possible output: 4 4 1 1 4</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
åœ¨ C++ ä¸­ï¼Œç±»çš„å®šä¹‰ä¼šå¼•å…¥æ–°çš„ä½œç”¨åŸŸï¼Œå…¶èŒƒå›´æ˜¯ member-specification ç­‰<sup><a href="https://timsong-cpp.github.io/cppwp/basic.scope.class#1">basic.scope.class#1</a></sup><sup id="fnref:class-scope"><a class="footnote-ref" href="#fn:class-scope">10</a></sup>ã€‚å› æ­¤è¿™é‡Œçš„ <code>Outer::Inner</code> å’Œå¤–é¢çš„ <code>Inner</code> å¯ä»¥åŒæ—¶å­˜åœ¨<sup id="fnref:redeclaration"><a class="footnote-ref" href="#fn:redeclaration">9</a></sup>ã€‚<br />
è¿™é‡Œç¬¬ 7 è¡Œè®¿é—®åˆ° <code>Outer::Inner</code> æ˜¯å› ä¸º Name Hiding<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/basic.scope.hiding">basic.scope.hiding</a></sup>ï¼Œå³æˆ‘ä»¬ç†Ÿæ‚‰çš„ä½œç”¨åŸŸå±è”½<sup id="fnref:name_hiding"><a class="footnote-ref" href="#fn:name_hiding">11</a></sup>ã€‚</li>
</ol>
<p>C å’Œ C++ éƒ½æ˜¯æŒ‰åç­‰ä»· (name equivalence) è€ŒéæŒ‰ç»“æ„ç­‰ä»· (structural equivalence) çš„<sup id="fnref:structural"><a class="footnote-ref" href="#fn:structural">6</a></sup>ï¼Œä¾‹å¦‚<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.name#1">class.name#1</a></sup>ï¼š</p>
<p><center><img alt="" src="../2023-02-09-22-36-23.png" width="600" /></center></p>
<details class="tips">
<summary>Forward Declaration</summary>
<p>å¦‚æœå½“å‰ä½œç”¨åŸŸæ²¡æœ‰åä¸º <code>identifier</code> çš„ç±»ï¼Œé‚£ä¹ˆå½¢å¦‚ <code>class-key attr identifier ;</code> çš„å£°æ˜æ˜¯ä¸€ä¸ª forward declaration<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.name#2">class.name#2</a></sup>ã€‚</p>
<p>ä¾‹å¦‚ <code>class Foo;</code>ï¼Œå®ƒå£°æ˜äº†ä¸€ä¸ªå« <code>Foo</code> çš„ç±»ï¼›ä½†ç›´åˆ°è¿™ä¸ªç±»è¢«å®šä¹‰ä¹‹å‰ï¼Œå®ƒçš„ç±»å‹æ˜¯ä¸å®Œæ•´çš„<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/basic.types.general#5">basic.types.general#5</a></sup>ã€‚</p>
<p>ä¸å®Œæ•´çš„ç±»å‹æœ‰ä¸€äº›é™åˆ¶ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›å¯ä»¥å®Œæˆçš„æ“ä½œã€‚ä¾‹å¦‚ä¸å®Œæ•´çš„ç±»å‹ä¸èƒ½ç”¨æ¥å®šä¹‰å˜é‡ï¼ˆåŒ…æ‹¬æˆå‘˜å˜é‡ï¼‰ã€ä½œä¸ºå‡½æ•°å£°æ˜æˆ–å®šä¹‰çš„å‚æ•°æˆ–è€…è¿”å›å€¼ç±»å‹ç­‰ï¼›ä½†æ˜¯å¯ä»¥å®šä¹‰æŒ‡å‘å®ƒçš„æŒ‡é’ˆã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¸¸è§çš„ç”¨é€”æ˜¯ï¼Œä¸¤ä¸ªç±»å¯èƒ½ä¼šäº’ç›¸ä½¿ç”¨ã€‚è¿™æ—¶å°±å¯ä»¥å†™å‡ºç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">X</span><span class="p">;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Y</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">X</span><span class="o">*</span><span class="w"> </span><span class="n">ptr</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// X mem; // Error: field has incomplete type &#39;X&#39;</span>
<span class="w">    </span><span class="n">X</span><span class="o">*</span><span class="w"> </span><span class="nf">foo</span><span class="p">();</span>
<span class="p">};</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Y</span><span class="o">*</span><span class="w"> </span><span class="n">ptr</span><span class="p">;</span>
<span class="w">    </span><span class="n">Y</span><span class="o">*</span><span class="w"> </span><span class="nf">bar</span><span class="p">();</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>è¿™æ—¶ç¬¬ 1 è¡Œæ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ç¬¬ 3 è¡Œçš„ <code>X</code> å°±æ˜¯ä¸€ä¸ªæœªçŸ¥çš„ç±»å‹ã€‚</p>
</details>
<details class="tips">
<summary>Injected Class Name</summary>
<p>C++ è§„å®šï¼ŒA class-name is inserted into the scope in which it is declared immediately after the class-name is seen. The class-name is also inserted into the scope of the class itself; this is known as the injected-class-name<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.pre#2">class.pre#2</a></sup>ã€‚è¿™å°±æ˜¯ <code>struct Node { Node* next; };</code> èƒ½å¤Ÿä½¿ç”¨ <code>Node</code> çš„åŸå› ã€‚</p>
<p>ä½†æ˜¯ï¼Œè€ƒè™‘å†…å­˜å¸ƒå±€å®¹æ˜“ç†è§£ï¼Œclass <code>C</code> å†…éƒ¨ä¸èƒ½æœ‰ non-static data member of type <code>C</code>ã€‚</p>
</details>
<h2 id="-å£°æ˜ä¸å®šä¹‰">â–² å£°æ˜ä¸å®šä¹‰<a class="headerlink" href="#-å£°æ˜ä¸å®šä¹‰" title="Permanent link">&para;</a></h2>
<p>å£°æ˜å°†åå­—å¼•å…¥æˆ–é‡æ–°å¼•å…¥åˆ°ç¨‹åºä¸­ã€‚å®šä¹‰æ˜¯å£°æ˜çš„ä¸€ç§ï¼ŒæŒ‡çš„æ˜¯é‚£äº›å¼•å…¥çš„åå­—å¯¹åº”çš„å®ä½“è¶³ä»¥è¢«ä½¿ç”¨çš„å£°æ˜ã€‚</p>
<details class="info">
<summary>standard</summary>
<p>[<a href="https://timsong-cpp.github.io/cppwp/basic.pre#5">basic.pre#5</a>]: Every name is introduced by a declaration</p>
<p>[<a href="https://timsong-cpp.github.io/cppwp/n4868/basic.def#2">basic.def#2</a>]: Each entity declared by a declaration is also <em>defined</em> by that declaration unless:</p>
<ul>
<li>it declares a function without specifying the function's body</li>
<li>it contains the extern specifier or a linkage-specification (<code>extern "C" {}</code>) and neither an initializer nor a function-body,</li>
<li>it declares a non-inline static data member in a class definition</li>
<li>...</li>
</ul>
</details>
<p>å£°æ˜ã€Œé‡æ–°å¼•å…¥ã€çš„ä¾‹å­æ˜¯ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">extern</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
</code></pre></div>
<p>ä¸Šé¢çš„ä¾‹å­æ˜¯åˆæ³•çš„ã€‚å®ƒä»¬åªæ˜¯ <code>i</code> å’Œ <code>f</code> çš„å£°æ˜è€Œéå®šä¹‰ã€‚</p>
<p>è€Œä¸‹é¢çš„è¯­å¥éƒ½æ˜¯å®šä¹‰ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w">                          </span><span class="c1">// defines a</span>
<span class="k">extern</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">         </span><span class="c1">// defines c</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="o">+</span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w">    </span><span class="c1">// defines f and defines x</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="p">};</span><span class="w">     </span><span class="c1">// defines S, Sâ€‹::â€‹a, and Sâ€‹::â€‹b</span>
<span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">up</span><span class="p">,</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="p">};</span><span class="w">              </span><span class="c1">// defines up and down</span>
<span class="n">S</span><span class="w"> </span><span class="n">anS</span><span class="p">;</span><span class="w">                          </span><span class="c1">// defines anS</span>
</code></pre></div>
<details class="note">
<summary>ä¾‹å¤–</summary>
<p>ä¸è¿‡ï¼Œä¹Ÿæœ‰ä¸€äº›ä¸åˆæ³•çš„æƒ…å†µï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</code></pre></div>
<p>è¿™ä¸ªä¾‹å­ä¼šæŠ¥ "redefinition of 'int i'" é”™è¯¯ã€‚</p>
<p>æ ¹æ®ä¸Šé¢çš„è®¨è®ºï¼Œè¿™ä¸¤ä¸ªè¯­å¥éƒ½å±äºå®šä¹‰ã€‚[<a href="https://timsong-cpp.github.io/cppwp/basic.scope.scope#5">basic.scope.scope#5</a>] è§„å®š "The program is ill-formed if, in any scope, a name is bound to two declarations that potentially conflict and one precedes the other"ã€‚å› æ­¤å¦‚æœè¿™ä¸¤ä¸ª <code>i</code> ä»£è¡¨ä¸åŒçš„ entityï¼Œåˆ™è¿åäº†è¿™æ¡è§„å®šï¼›å¦‚æœä»£è¡¨åŒä¸€ä¸ª entityï¼Œåˆ™è¿åäº† One-Definition Rule (ODR) [<a href="https://timsong-cpp.github.io/cppwp/n4868/basic.def.odr#1">basic.def.odr#1</a>] "No translation unit shall contain more than one definition of any variable, function, class type..."ã€‚</p>
<p>å› æ­¤ï¼Œä¸‹é¢çš„ä¾‹å­ä¹Ÿæ˜¯ä¸åˆæ³•çš„ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">extern</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</code></pre></div>
<p>å› ä¸ºè¿™ä¸¤ä¸ªè¯­å¥ä¹Ÿéƒ½å±äºå®šä¹‰ã€‚</p>
<p>å¦å¤–ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">extern</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="k">extern</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</code></pre></div>
<p>è¿™ä¸ªä¾‹å­ä¼šæŠ¥ "redeclaration of 'i' with a different type" é”™è¯¯<sup><a href="../std_citation_needed">std_citation_needed</a></sup>ã€‚</p>
</details>
<h2 id="42-ç±»çš„æˆå‘˜">4.2 ç±»çš„æˆå‘˜<a class="headerlink" href="#42-ç±»çš„æˆå‘˜" title="Permanent link">&para;</a></h2>
<p>member-specification è¯´æ˜äº†ç±»çš„æˆå‘˜ã€‚å…¶ç»“æ„å¦‚ä¸‹<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.mem.general">class.mem.general</a></sup>ï¼š</p>
<p><center><img alt="" src="../2023-02-11-15-49-10.png" width="400" /></center></p>
<p>å…¶ä¸­ member-declaration æ˜¯æˆå‘˜çš„å£°æ˜ï¼Œè€Œ access-specifier æ˜¯ <code>private</code>, <code>public</code>, <code>protected</code> ä¹‹ä¸€ï¼ˆå‰é¢ä¸¤ä¸ªæˆ‘ä»¬è®¨è®ºè¿‡äº†ï¼Œç¬¬ä¸‰ä¸ªæˆ‘ä»¬ä¼šåœ¨åæ–‡è®¨è®ºï¼‰ã€‚æˆå‘˜å¯ä»¥åŒ…æ‹¬æˆå‘˜å˜é‡ã€æˆå‘˜å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ï¼ˆåµŒå¥—çš„ï¼‰ç±»ã€æšä¸¾ç­‰ï¼Œå¦‚æœ¬æ–‡å‰é¢ä»£ç ä¸­çš„ <code>Outer::Inner</code>ï¼Œè¿˜å¯ä»¥åŒ…æ‹¬å£°æ˜ç±»å‹çš„åˆ«åï¼ˆå¦‚ <code>typedef</code> å’Œ <code>using</code>ï¼‰ç­‰<sup id="fnref:class_member"><a class="footnote-ref" href="#fn:class_member">12</a></sup>ã€‚</p>
<div class="admonition note">
<p class="admonition-title">Type alias</p>
<p>C++11 å¼•å…¥äº† <code>using</code> æ¥å£°æ˜ç±»å‹åˆ«åï¼Œå®ƒçš„ç”¨é€”å’Œ <code>typedef</code> ç±»ä¼¼ï¼Œå¦‚ <code>typedef struct arraylist_* arraylist;</code> å¯ä»¥å†™æˆ <code>using arraylist = struct arraylist_ *;</code>ã€‚</p>
<p>ç±»å‹åˆ«åçš„å£°æ˜ä¹Ÿå¯ä»¥æ˜¯ç±»çš„æˆå‘˜ï¼Œå…¶ä½œç”¨åŸŸæ˜¯ç±»çš„ä½œç”¨åŸŸï¼ŒåŒæ ·å— access-specifier çš„å½±å“ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">;</span>
<span class="w">    </span><span class="n">elem</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">     </span><span class="c1">// OK, x has type int</span>
<span class="w">    </span><span class="n">elem</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">elem</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">char</span><span class="p">;</span>
<span class="w">    </span><span class="n">type</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w">     </span><span class="c1">// OK, c has type char</span>
<span class="p">};</span>

<span class="c1">// elem y;      // Error: unknown type name &#39;elem&#39;</span>
<span class="n">Foo</span><span class="o">::</span><span class="n">elem</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="w">    </span><span class="c1">// OK, z has type int</span>
<span class="c1">// Foo::type c; // Error: &#39;type&#39; is a private member of &#39;Foo&#39;   </span>
</code></pre></div></td></tr></table></div>
<p><code>using</code> è¢«å¼•å…¥æ˜¯ä¸ºäº†æ”¯æŒæ¨¡æ¿ã€‚æˆ‘ä»¬åœ¨è®²åˆ°æ¨¡æ¿çš„æ—¶å€™å†æ¥è®¨è®ºè¿™äº›é—®é¢˜ã€‚</p>
</div>
<p>ç±»çš„æˆå‘˜å‡½æ•°å¯ä»¥åœ¨ç±»å†…ç›´æ¥ç»™å‡ºå®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨ç±»å†…åªå£°æ˜ï¼Œåœ¨ç±»å¤–ç»™å‡ºå®šä¹‰ï¼›è¿™ä¸å½±å“æˆå‘˜å‡½æ•°çš„ access-specifierï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">bar</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">v</span><span class="p">);</span>
<span class="p">};</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">Foo::bar</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">v</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Foo</span><span class="w"> </span><span class="n">f</span><span class="p">;</span>
<span class="w">    </span><span class="n">f</span><span class="p">.</span><span class="n">bar</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// Error: &#39;bar&#39; is a private member of &#39;Foo&#39;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="this-æŒ‡é’ˆ"><code>this</code> æŒ‡é’ˆ<a class="headerlink" href="#this-æŒ‡é’ˆ" title="Permanent link">&para;</a></h3>
<p>æˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡ï¼ŒC++ æ—©æœŸä¼šè¢«ç¼–è¯‘æˆ C è¯­è¨€ï¼Œç„¶åå†ç¼–è¯‘æˆæ±‡ç¼–ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ä¾‹å¦‚ä¸Šé¢ä»£ç ä¸­çš„ <code>Foo::bar</code> å‡½æ•°ï¼Œå¦‚ä½•ç¼–è¯‘æˆ C ä¸­çš„å‡½æ•°å‘¢ï¼Ÿè¿™ä¸€é—®é¢˜çš„éš¾ç‚¹æ˜¯ï¼šè¿™ä¸ªå‡½æ•°é‡Œè®¿é—®äº†è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„å¯¹è±¡ (ä¸å¦¨ç§°ä¹‹ä¸º calling object) çš„æˆå‘˜å˜é‡ <code>x</code>ï¼›é‚£ä¹ˆè¿™ä¸ªå‡½æ•°å¦‚ä½•çŸ¥é“ calling object åœ¨å“ªé‡Œï¼Œä»è€Œè®¿é—®å®ƒçš„æˆå‘˜å˜é‡å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼Œæ¯ä¸ªæˆå‘˜å‡½æ•°<sup id="fnref:this"><a class="footnote-ref" href="#fn:this">13</a></sup>éƒ½ä¼šè¢«è§†ä¸ºæœ‰ä¸€ä¸ª implicit object parameterï¼Œå®ƒå³æ˜¯ calling objectã€‚è€Œåœ¨æˆå‘˜å‡½æ•°çš„å‡½æ•°ä½“ä¸­ï¼Œ<code>this</code> è¡¨è¾¾å¼çš„å€¼å³æ˜¯ implicit object parameter å³ calling object çš„åœ°å€ã€‚</p>
<p>åœ¨æˆå‘˜å‡½æ•°çš„å‡½æ•°ä½“ä¸­ï¼Œè®¿é—®ä»»ä½•æˆå‘˜æ—¶éƒ½ä¼šè¢«è‡ªåŠ¨æ·»åŠ  <code>this-&gt;</code>ï¼Œä¾‹å¦‚ <code>void Foo::bar(int v) { x += v; }</code> ä¸­çš„ <code>x += v;</code> å®é™…æ˜¯ <code>this-&gt;x += v;</code>ã€‚</p>
<p>ä¸‹å›¾ä¸­ï¼Œæ±‡ç¼–ç¬¬ 17~19 è¡Œå°†å‚æ•° <code>ff</code> æ”¾åˆ°äº†ç¬¬ä¸€ä¸ªå‚æ•°çš„ä½ç½®ï¼Œ20 è¡Œè°ƒç”¨ <code>f()</code>ï¼Œäº‹å®ä¸Šå°±æ˜¯å°†è¿™ä¸ªå¯¹è±¡çš„åœ°å€éšå¼ä¼ å…¥å…¶ä¸­äº†ã€‚</p>
<p><center><img alt="" src="../2023-03-04-02-13-48.png" width="300" /></center></p>
<p>è‡ª C++23 å¼€å§‹ï¼Œ<code>this</code> å…³é”®å­—æœ‰äº†æ–°çš„å«ä¹‰ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ç« èŠ‚è®¨è®ºã€‚</p>
<h2 id="-inline-å‡½æ•°">â–² inline å‡½æ•°<a class="headerlink" href="#-inline-å‡½æ•°" title="Permanent link">&para;</a></h2>
<p>æˆ‘ä»¬åœ¨ OOP ä¸€èŠ‚ä¸­ï¼Œè®¨è®ºå°è£…æ—¶ä»‹ç»äº† getters å’Œ settersï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">password</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">checkPassword</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pw</span><span class="p">);</span><span class="w"> </span><span class="c1">// check if pw == password</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAge</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">v</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">            </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">getAge</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>ä½†æ˜¯ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œå‡½æ•°è°ƒç”¨æ˜¯æœ‰å¼€é”€çš„ï¼Œå‡½æ•°å¼€é”€ä¸»è¦ç”¨æ¥ä¼ é€’å‚æ•°å’Œè·å–è¿”å›å€¼ï¼Œéœ€è¦æ—¶è¿˜è¦ä¿å­˜å¯„å­˜å™¨çš„å€¼ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<p><center><img alt="" src="../2023-02-23-00-42-13.png" width="300" /></center></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ <code>int foo(int x) { return add5(x); }</code> å’Œ <code>int foo(int x) { return x + 5; }</code> æ˜¯ç­‰æ•ˆçš„ï¼›ä½†æ˜¯ç”±äºå‡½æ•°è°ƒç”¨çš„å­˜åœ¨ï¼Œå…¶æ•ˆç‡æ˜¯æ…¢çš„ã€‚é‚£ä¹ˆï¼Œ<code>getAge()</code> ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯å¦ä¹Ÿæœ‰è¿™ç§ä»£ä»·å‘¢ï¼Ÿ</p>
<p>C++ çš„è®¾è®¡å“²å­¦å†³å®šäº†ï¼šä¸åº”å½“å› ä¸ºå°è£…æ€§è€Œå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚å¦‚æœ getters å’Œ setters çš„è°ƒç”¨ä¹Ÿéœ€è¦é¢å¤–å¼€é”€çš„è¯ï¼Œè¿½æ±‚æ•ˆç‡çš„ç¨‹åºå‘˜å°±ä¼šé€‰æ‹©ä¸ä½¿ç”¨å°è£…ã€‚å› æ­¤è¿™ä¸ªé—®é¢˜å¦‚ä½•è§£å†³å‘¢ï¼Ÿæ—©åœ¨ C with Classes è®¾è®¡ä¹‹åˆï¼Œè¿™ä¸ªé—®é¢˜å°±é€šè¿‡ <strong>å†…è”æ›¿æ¢ (inline substitution)</strong><sup><a href="https://timsong-cpp.github.io/cppwp/n4868/dcl.inline#2">dcl.inline#2</a></sup> è¢«è§£å†³äº†ã€‚</p>
<p>å†…è”æ›¿æ¢æœ‰ç‚¹ç±»ä¼¼äº function-like macros<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/cpp.replace.general#2">cpp.replace.general#2</a></sup>ï¼Œå³åœ¨å‡½æ•°è°ƒç”¨çš„åœ°æ–¹å°†å‡½æ•°ä½“å±•å¼€ï¼Œè€Œä¸ç»è¿‡å‡½æ•°è°ƒç”¨çš„æ­¥éª¤ã€‚ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œåœ¨é€‰æ‹© <code>-O1</code> ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œä¸Šé¢çš„ä»£ç ä¼šå˜æˆè¿™æ ·ï¼š</p>
<p><center><img alt="" src="../2023-02-23-01-03-43.png" width="300" /></center></p>
<p>å¯ä»¥æ˜æ˜¾çœ‹åˆ°ï¼Œ<code>foo()</code> çš„è®¡ç®—è¿‡ç¨‹ä¸­ä¸å†æœ‰å‡½æ•°è°ƒç”¨å‡ºç°äº†ã€‚</p>
<p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœæœ‰è¿™æ ·çš„ä»£ç ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">swap</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">;</span>
<span class="w">    </span><span class="o">*</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="o">*</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="n">swap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p>å¦‚æœ <code>swap</code> å‡½æ•°è¢«å†…è”ï¼Œé‚£ä¹ˆç¨‹åºå¯èƒ½ä¼šç­‰ä»·äºï¼š</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">    </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">    </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="w">    </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p>æœ‰äº†å†…è”æ›¿æ¢ï¼Œgetter å’Œ setter å°±ä¸å†æœ‰é¢å¤–çš„å¼€é”€äº†ï¼š</p>
<p><center><img alt="" src="../2023-02-23-02-06-15.png" width="300" /></center></p>
<div class="admonition note inline end">
<p class="admonition-title">Note</p>
<p>å†…è”å‡½æ•°æ˜¯ C++ å’Œ C å…±åŒå‘å±•çš„ä¸€ä¸ªä¾‹å­ã€‚åœ¨ C89 ä¸­å¹¶æ²¡æœ‰å†…è”å‡½æ•°ï¼Œè€Œ C99 å’Œ C++ ä¸­éƒ½æœ‰å†…è”å‡½æ•°ã€‚</p>
<p>C++17 å¼€å§‹ï¼Œ<code>inline</code> è¿˜è¢«ç”¨äºå˜é‡ã€‚æˆ‘ä»¬ä¼šåœ¨ï¼ˆä¹Ÿè®¸ï¼‰ä¸è¿œçš„å°†æ¥è®¨è®ºè¿™ä¸ªè¯é¢˜ã€‚</p>
</div>
<p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ ·çš„å‡½æ•°ä¼šè¢«å†…è”å‘¢ï¼Ÿåœ¨ C with Classes ä¸­ï¼Œåªæœ‰é‚£äº›å‡½æ•°ä½“å†™åœ¨ç±»çš„å®šä¹‰ä¸­çš„æˆå‘˜å‡½æ•°æ‰ä¼šè¢«å†…è”ã€‚å½“ç„¶ï¼Œå¹¶éæ‰€æœ‰è¿™æ ·çš„å‡½æ•°éƒ½ä¼šè¢«å†…è”ï¼Œæ¯”å¦‚å¦‚æœæŸä¸ªå‡½æ•°æ˜¯é€’å½’çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å¾ˆå¯èƒ½å°±æ²¡åŠæ³•è¢«å†…è”ã€‚ï¼ˆå½“ç„¶ï¼Œå¦‚æœç¼–è¯‘å™¨æƒ³çš„è¯ï¼Œå¯ä»¥é€šè¿‡é€’å½’å±•å¼€å®ç°å†…è”ã€‚ï¼‰</p>
<p>è€Œåœ¨åæ¥çš„ C++ ä¸­ï¼Œ<code>inline</code> å…³é”®å­—è¢«å¼•å…¥ï¼›å®ƒç”¨åœ¨å‡½æ•°å£°æ˜ä¸­ï¼Œä¾‹å¦‚ <code>inline int foo(int x) { return add5(x); }</code>ã€‚å®ƒå‘ç¼–è¯‘å™¨è¡¨æ˜ä¸€ä¸ªå»ºè®®ï¼šè¿™é‡Œåº”è¯¥ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨å†…è”æ›¿æ¢è€Œéé€šå¸¸çš„å‡½æ•°è°ƒç”¨ã€‚å‡½æ•°ä½“å†™åœ¨ç±»çš„å®šä¹‰ä¸­çš„æˆå‘˜å‡½æ•°ä¹Ÿä¼šé»˜è®¤æœ‰æ­¤å»ºè®®ã€‚ï¼ˆä½†æ˜¯ç¼–è¯‘å™¨é€šå¸¸å¿½ç•¥è¿™ç§å»ºè®®ï¼Œè€Œè‡ªå·±é€‰æ‹©æ˜¯å¦éœ€è¦å†…è”ã€‚ä¾‹å¦‚å‰é¢å›¾ä¸­ <code>add5</code> é‚£ä¸ªå‡½æ•°ï¼Œè™½ç„¶æˆ‘ä»¬æ²¡æœ‰å†™ <code>inline</code>ï¼Œä½†æ˜¯ç¼–è¯‘å™¨ä»ç„¶å†³å®šå°†å®ƒå†…è”ã€‚ï¼‰</p>
<p>æ˜¾ç„¶ï¼Œå†…è”ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ã€‚å¦‚ä¸Šé¢çš„ä¾‹å­æ‰€ç¤ºï¼Œå†…è”ä¼šåœ¨ <strong>æ¯å¤„</strong> è°ƒç”¨è¢«å±•å¼€ï¼Œå› æ­¤å¦‚æœè¢«å†…è”çš„å‡½æ•°éå¸¸å¤§ï¼Œåˆ™ä¼šå¯¼è‡´ç”Ÿæˆçš„ç›®æ ‡ä»£ç å¾ˆå¤§ï¼Œè¿™ä¼šå¸¦æ¥å†…å­˜ç´§å¼ æˆ–è€…å±€éƒ¨æ€§é—®é¢˜ï¼›è¿™ä¹Ÿå¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿä¸€å®šå½±å“ã€‚</p>
<p>å†…è”å‡½æ•°æ˜¯ C è¯­è¨€ä¸­ function-like macros çš„ä¸€ä¸ªå¥½çš„æ›¿æ¢ã€‚<abbr title="Bjarne Stroustrup">BS</abbr> è¯´ï¼ŒC++ å¸Œæœ›ã€Œå…è®¸ç”¨è¯­è¨€æœ¬èº«è¡¨è¾¾æ‰€æœ‰é‡è¦çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯åœ¨æ³¨é‡Šé‡Œæˆ–è€…é€šè¿‡å®è¿™ç±»é»‘å®¢æ‰‹æ®µã€ã€‚å®æ˜¯é¢„å¤„ç†å™¨è´Ÿè´£çš„äº‹æƒ…ï¼Œè€Œéç¼–è¯‘å™¨ã€‚å› æ­¤ function-like macros çš„é‡å¤§é—®é¢˜ä¹‹ä¸€æ˜¯ç¼ºä¹ç±»å‹æ£€æŸ¥ï¼Œå¦å¤–ä¼šå› ä¸ºæ‹¬å·ä¹‹ç±»çš„é—®é¢˜å¼•å‘å›°æ‰°ã€‚ç”¨å†…è”çš„å‡½æ•°æ›¿ä»£ function-like macros ä¹Ÿèƒ½å¤Ÿæœ‰ä½œç”¨åŸŸå’Œè®¿é—®æ§åˆ¶ï¼Œè€Œè¿™äº›å¦‚æœä½¿ç”¨å®åˆ™éœ€è¦æ‰‹åŠ¨æ§åˆ¶ç”šè‡³æ²¡åŠæ³•å®ç°ã€‚</p>
<details class="info">
<summary>Info</summary>
<p>å†…è”å‡½æ•°è¿˜æœ‰ç›¸å…³çš„å¾ˆå¤šé—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå‡å¦‚åœ¨æ•´ä¸ªç¨‹åºä¸­çš„ä¸åŒç¼–è¯‘å•å…ƒé‡Œï¼ŒåŒä¸€ä¸ªå†…è”å‡½æ•°æœ‰ä¸åŒå®šä¹‰ä¼šå‘ç”Ÿä»€ä¹ˆäº‹ã€‚ç”±äº C++ å…è®¸åˆ†åˆ«ç¼–è¯‘ï¼Œè¿™æ ·çš„æ£€æŸ¥æ˜¯æç«¯å›°éš¾çš„ã€‚å› æ­¤ï¼Œæ ‡å‡†è§„å®šè¿™ç§æƒ…å†µæ˜¯ undefined behavior<sup><a href="../std_citation_needed">std_citation_needed</a></sup>ã€‚æˆ‘ä»¬ä¼šåœ¨æœªæ¥èŠ undefined behavior ç›¸å…³çš„é—®é¢˜ã€‚</p>
<p><a href="https://stackoverflow.com/a/1759575/14430730">è¿™ä¸ªå›ç­”</a> æŒ‡å‡ºï¼šDon't add <code>inline</code> just because you think your code will run faster if the compiler inlines it. ... Generally, the compiler will be able to do this better than you.</p>
<p>å› æ­¤ï¼Œå®é™…ä¸Šåœ¨ç°åœ¨çš„ C++ ä¸­ï¼Œ<code>inline</code> æ¯”ã€Œè®©ä¸€ä¸ªå‡½æ•°è¢«å†…è”ã€æ›´é‡è¦çš„ä½œç”¨åœ¨äºï¼Œå¸®åŠ©å®ç° header-only çš„åº“ã€‚</p>
</details>
<h2 id="43-æ„é€ å‡½æ•°">4.3 æ„é€ å‡½æ•°<a class="headerlink" href="#43-æ„é€ å‡½æ•°" title="Permanent link">&para;</a></h2>
<p>æ„é€ å‡½æ•° (constructor) æ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œç”¨äºåˆå§‹åŒ–è¯¥ç±»çš„å¯¹è±¡ã€‚æ„é€ å‡½æ•° constructor ä¹Ÿæ—¶å¸¸è¢«ç®€å†™ä¸º ctor æˆ–è€… c'tor ç­‰ã€‚</p>
<p>ç”¨ <abbr title="Bjarne Stroustrup">BS</abbr> çš„è¯è¯´ï¼Œæ„é€ å‡½æ•°çš„æ„ä¹‰ä¹‹ä¸€æ˜¯ã€Œä½¿ç¨‹åºå‘˜èƒ½å¤Ÿå»ºç«‹èµ·æŸç§ä¿è¯ï¼Œå…¶ä»–æˆå‘˜å‡½æ•°éƒ½èƒ½ä¾èµ–è¿™ä¸ªä¿è¯ã€ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">elem</span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Container</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œç¬¬ 5 è¡Œçš„ <code>Container()</code> æ˜¯æ„é€ å‡½æ•°ã€‚å®ƒå’Œå…¶ä»–æˆå‘˜å‡½æ•°çš„åŒºåˆ«æ˜¯ï¼Œå®ƒä¸å†™è¿”å›å€¼ç±»å‹ï¼Œè€Œä¸”å®ƒç›´æ¥ä½¿ç”¨ç±»çš„åå­—ã€‚ï¼ˆæ„é€ å‡½æ•°å¹¶æ²¡æœ‰åå­—<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.ctor.general#2">class.ctor.general#2</a></sup>ã€‚ï¼‰</p>
<p>ç¬¬ 6 è¡Œçš„ <code>val = nullptr;</code> å°±æ˜¯å‰é¢æåˆ°çš„ã€Œä¿è¯ã€ï¼Œå³ <code>val</code> çš„å€¼è¦ä¹ˆæ˜¯ <code>nullptr</code>ï¼Œè¦ä¹ˆæ˜¯å…¶ä»–æˆå‘˜å‡½æ•°èµ‹çš„å€¼ï¼Œè€Œä¸ä¼šæ˜¯ä¸ªéšæœºçš„å€¼ã€‚</p>
<div class="admonition note">
<p class="admonition-title">nullptr</p>
<p><code>nullptr</code> æ˜¯ C++11 å¼•å…¥çš„ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨æ¥è¡¨ç¤ºç©ºæŒ‡é’ˆã€‚è¿™ä¸ C ä¸­çš„ <code>NULL</code> ä¸åŒï¼Œè™½ç„¶åè€…åœ¨ C++ ä¸­ä¹Ÿèƒ½ä½¿ç”¨ã€‚æˆ‘ä»¬åœ¨ç¨åä»‹ç» <code>nullptr</code> ä¸ºä»€ä¹ˆä¼šè¢«å¼•å…¥ã€‚</p>
</div>
<p>è¿™æ ·ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>Container c = Container();</code> æ„é€ ä¸€ä¸ªå¯¹è±¡äº†<sup id="fnref:copy_ctor"><a class="footnote-ref" href="#fn:copy_ctor">14</a></sup>ã€‚</p>
<p><code>Container();</code> ä¼šè¿”å›ä¸€ä¸ªæ„é€ å‡ºçš„æ— åå¯¹è±¡ã€‚ä¸ä¸¥è°¨åœ°è¯´ï¼Œä¸Šé¢çš„è¯­å¥å°†åå­— <code>c</code> ç»‘å®šåˆ°äº†å¯¹åº”çš„æ— åå¯¹è±¡ä¸Šã€‚ä¸ºäº†ä»£ç æ›´åŠ ç®€æ´ç´§å‡‘ï¼ŒC++ å…è®¸æ›´åŠ ç®€æ´çš„å†™æ³•ï¼š<code>Container c;</code>ã€‚</p>
<p>å› æ­¤ï¼Œå½“æˆ‘ä»¬åœ¨ç”¨ <code>Container c;</code> å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå°±ä¼šè°ƒç”¨æ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼š</p>
<p><center><img alt="" src="../2023-02-24-00-02-54.png" width="700" /></center></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±äºå®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶éœ€è¦ç”¨åˆ°æ„é€ å‡½æ•°ï¼Œå› æ­¤å¦‚æœè¦ç”¨çš„æ„é€ å‡½æ•°æ˜¯ <code>private</code> çš„ï¼Œå¯¹è±¡å°±æ— æ³•è¢«æ„é€ ï¼š</p>
<p><center><img alt="" src="../2023-03-04-01-35-48.png" /></center></p>
<details class="note" open="open">
<summary>Foo() æ˜¯è°ƒç”¨æ„é€ å‡½æ•°çš„å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼å—ï¼Ÿ</summary>
<p>ä¸æ˜¯ï¼çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="n">Foo</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Foo</span><span class="p">();</span>
<span class="n">Foo</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Foo</span><span class="o">::</span><span class="n">Foo</span><span class="p">();</span>
</code></pre></div>
<p>ç¬¬äºŒè¡Œä¼šæœ‰æŠ¥é”™ï¼š</p>
<p><center><img alt="" src="../2023-03-03-12-30-33.png" /></center></p>
<p>å³ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°ï¼Œè¿™æ˜¯å› ä¸º <strong>æ„é€ å‡½æ•°å¹¶æ²¡æœ‰åå­—ï¼Œå› æ­¤æ°¸è¿œæ— æ³•è¢«ç”¨åå­—æ‰¾åˆ°</strong><sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.ctor.general#2">class.ctor.general#2</a></sup>ã€‚<code>Foo();</code> çš„å†™æ³•å¹¶ä¸æ˜¯å¯¹æ„é€ å‡½æ•°çš„è°ƒç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ª "function-style cast"ã€‚</p>
<p>è¿™æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ C è¯­è¨€ä¸­çš„ç±»å‹è½¬æ¢ (cast) è¡¨è¾¾å¼å½¢å¦‚ <code>(int)3.2</code>ï¼ˆç§°ä¸º C-style castï¼‰ï¼Œè€Œ C++ å¼•å…¥äº†å½¢å¦‚ <code>int(3.2)</code> çš„ function-style castã€‚<code>int(3.2)</code> å°† 3.2 æ˜¾å¼åœ°è½¬æ¢ä¸ºäº†ä¸€ä¸ªä¸´æ—¶çš„ <code>int</code> å¯¹è±¡ï¼›ç±»ä¼¼åœ°ï¼Œ<code>Foo()</code> ä¹Ÿï¼ˆä»€ä¹ˆéƒ½ä¸ç”¨åœ°ï¼‰æ˜¾å¼åœ°è½¬æ¢å‡ºäº†ä¸€ä¸ªä¸´æ—¶çš„ <code>Foo</code> å¯¹è±¡ã€‚è™½ç„¶è¿™ä¸ªè½¬æ¢æœ¬èº«ä¼šä½¿ç”¨åˆ°æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿™ä¸ªè¡¨è¾¾å¼æœ¬èº«ä¸æ˜¯åœ¨è°ƒç”¨æ„é€ å‡½æ•°ã€‚</p>
<p>è¿™ä¸ªä¸œè¥¿çš„é‡è¦ç”¨é€”ä¹‹ä¸€ä¹Ÿæ˜¯æ¨¡æ¿ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸­å†æ¬¡è®¨è®ºã€‚</p>
</details>
<p>åƒæ™®é€šçš„å‡½æ•°ä¸€æ ·ï¼Œæ„é€ å‡½æ•°å¯ä»¥æ˜¯æœ‰å‚æ•°çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„æ„é€ å‡½æ•°å…è®¸ç”¨æˆ·ä¼ é€’ä¸€ä¸ªåˆå§‹å¤§å°ï¼Œç„¶åç›´æ¥å¼€ä¸€ä¸ªå¯¹åº”å¤§å°çš„ç©ºé—´ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">elem</span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Container</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">elem</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>è¿™æ ·ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>Container c2 = Container(64);</code> æ„é€ ä¸€ä¸ªè‡ªå®šä¹‰å¤§å°çš„å®¹å™¨äº†ã€‚</p>
<p>åŒæ ·åœ°ï¼ŒC++ å…è®¸æ›´åŠ ç®€æ´çš„å†™æ³•ï¼š<code>Container c2(64);</code>ã€‚å³ï¼Œå¦‚æœæ— å‚åœ°æ„é€ ï¼Œåˆ™ä¸éœ€è¦å†™å‡ºæ‹¬å·ï¼›å¦‚æœæœ‰å‚æ„é€ ï¼Œåˆ™å°†å‚æ•°å†™åœ¨æ‹¬å·ä¸­ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ C++ ä¸­ï¼Œå£°æ˜å˜é‡æ—¶çš„ <strong>åˆå§‹åŒ–å™¨ (initializer)</strong> é™¤äº†ç±»ä¼¼ <code>int a = 4;</code> çš„ <code>= initializer-clause</code> ä¹‹å¤–ï¼Œè¿˜æœ‰ç±»ä¼¼ <code>int a(4);</code> çš„ <code>( expression-list )</code><sup><a href="https://timsong-cpp.github.io/cppwp/n4868/dcl.init.general#1">dcl.init.general#1</a></sup>ã€‚<sup id="fnref:initializer"><a class="footnote-ref" href="#fn:initializer">15</a></sup><sup id="fnref:equal-initializer"><a class="footnote-ref" href="#fn:equal-initializer">16</a></sup></p>
<details class="notes" open="open">
<summary>æ— å‚æ„é€ æ—¶ä¸ºä»€ä¹ˆä¸ç”¨æ‹¬å·å‘¢ï¼Ÿ</summary>
<p>è¿™ä¸ªé—®é¢˜è¢«ç§°ä¸º <strong>most vexing parse</strong>ã€‚å¦‚æœå®ƒåŠ äº†æ‹¬å·ï¼Œå˜æˆäº† <code>Container c1();</code>ï¼Œä¼šè¢«ç†è§£æˆä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬æ¥çœ‹è¿™ä¸ªä¸œè¥¿ï¼š<code>int func();</code>ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼›è€Œ <code>Container c1();</code> çš„è¯­æ³•ç»“æ„ä¸å…¶å®Œå…¨ç›¸åŒï¼Œå› æ­¤è¿™æ ·çš„è¡¨è¿°æ˜¯æœ‰æ­§ä¹‰çš„ã€‚</p>
<p>å› æ­¤ï¼ŒC++ è§„å®šæ— å‚æ„é€ æ—¶ä¸ç”¨å¸¦æ‹¬å·ï¼ˆå‡†ç¡®åœ°è¯´ï¼Œå£°æ˜è¯­å¥ä¸­è¦ä¹ˆæ²¡æœ‰ initializerï¼Œå¦‚æœæœ‰ initalizer ä¸”æ˜¯æ‹¬å·çš„å½¢å¼çš„è¯åˆ™æ‹¬å·é‡Œä¸èƒ½ä¸ºç©º<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/dcl.init.general#1">dcl.init.general#1</a></sup>ï¼‰ã€‚</p>
<p>C++11 å¼•å…¥çš„ <strong>brace initialization</strong>ï¼ˆä¹Ÿè¢«ç§°ä¸º <strong>uniform initialization</strong>ï¼‰ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬åœ¨åé¢çš„ç« èŠ‚è®¨è®ºè¿™ä¸ªæœºåˆ¶ã€‚</p>
</details>
<h3 id="åŠ¨æ€å†…å­˜åˆ†é…">åŠ¨æ€å†…å­˜åˆ†é…<a class="headerlink" href="#åŠ¨æ€å†…å­˜åˆ†é…" title="Permanent link">&para;</a></h3>
<p>æˆ‘ä»¬ä¹‹å‰æåˆ°ï¼Œæ„é€ å‡½æ•°å­˜åœ¨çš„æ„ä¹‰æ˜¯ç»™è¯¥ç±»çš„æ¯ä¸ªå¯¹è±¡æä¾›ä¸€å®šçš„ã€Œä¿è¯ã€ï¼Œè€Œ C++ é€šè¿‡ç¡®ä¿æ¯ä¸ªå¯¹è±¡éƒ½æ‰§è¡Œè¿‡æ„é€ å‡½æ•°æ¥æä¾›è¿™ä¸€ä¿è¯ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨ C ä¸­çŸ¥é“é€šè¿‡ <code>malloc</code> åŠ¨æ€åˆ†é…å†…å­˜çš„æ–¹å¼ï¼›é‚£ä¹ˆå¦‚æœæˆ‘ä»¬å†™ <code>Container *p = (Container *)malloc(sizeof(Container));</code> ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>äº‹å®ä¸Šï¼Œè¿™ç¡®å®åˆ†é…äº† <code>sizeof(Container)</code> é‚£ä¹ˆå¤§çš„ç©ºé—´ï¼Œä½†æ˜¯ç¡®å®ä¹Ÿæ²¡æœ‰è°ƒç”¨æ„é€ å‡½æ•°ã€‚å› æ­¤ï¼ŒC++ å¼•å…¥äº†æ–°çš„ç”¨äºåˆ›å»ºåŠ¨æ€å¯¹è±¡çš„æ“ä½œç¬¦ <code>new</code> ä»¥åŠå¯¹åº”çš„ç”¨æ¥å›æ”¶çš„ <code>delete</code>ã€‚</p>
<p><code>new</code> è¡¨è¾¾å¼å¯ä»¥ç”¨æ¥åˆ›å»ºå¯¹è±¡æˆ–è€…æ•°ç»„ï¼š<code>int * p1 = new int; int * pa = new int[n];</code>ã€‚</p>
<p>å¦‚æœæ˜¯ç±»çš„å¯¹è±¡ï¼Œåˆ™æ„é€ å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼š</p>
<p><center><img alt="" src="../2023-03-05-16-37-46.png" /></center></p>
<p><code>new</code> è¡¨è¾¾å¼ä¹Ÿå¯ä»¥åŒ…å«åˆå§‹åŒ–å™¨ï¼Œä½†æ˜¯åªèƒ½æ˜¯ <code>( something )</code> æˆ–è€… <code>{ something }</code> çš„å½¢å¼ï¼Œä¸èƒ½æ˜¯ <code>= something</code> çš„å½¢å¼ï¼š</p>
<p><center><img alt="" src="../2023-03-05-16-41-09.png" /></center></p>
<p><code>new</code> è¡¨è¾¾å¼å¹²çš„äº‹æƒ…æ˜¯ç”³è¯·å†…å­˜ + è°ƒç”¨æ„é€ å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæŒ‡é’ˆï¼›è€Œ <code>delete</code> è¡¨è¾¾å¼å¹²çš„äº‹æƒ…æ˜¯è°ƒç”¨ææ„å‡½æ•° + é‡Šæ”¾å†…å­˜ã€‚<code>new</code> è¡¨è¾¾å¼æ˜¯ <strong>å”¯ä¸€</strong> çš„ç”¨æ¥åˆ›å»ºåŠ¨æ€ç”Ÿå‘½å‘¨æœŸå¯¹è±¡çš„æ–¹å¼ï¼ˆå› ä¸º <code>malloc</code> åªæ˜¯å¼€è¾Ÿå†…å­˜ï¼Œå¹¶ä¸åˆ›å»ºå¯¹è±¡ã€‚å¯¹è±¡æ˜¯ã€Œa region of storage with <strong>associated semantics</strong>ã€ï¼‰ã€‚</p>
<p><code>delete</code> ä¼šè°ƒç”¨ç±»å¯¹è±¡çš„ææ„å‡½æ•°ï¼š</p>
<p><center><img alt="" src="../2023-03-05-16-43-29.png" /></center></p>
<p>å¦‚ä¸Šé¢ä¾‹å­æ‰€ç¤ºï¼Œå¦‚æœ <code>p</code> åœ¨ <code>new</code> çš„æ—¶å€™åˆ›å»ºçš„æ˜¯å•ä¸ªå¯¹è±¡ï¼Œåˆ™åº”è¯¥ç”¨ <code>delete p;</code> çš„å½¢å¼ (single-object delete expression) å›æ”¶ï¼›å¦‚æœ <code>p</code> åœ¨ <code>new</code> çš„æ—¶å€™åˆ›å»ºçš„æ˜¯æ•°ç»„ï¼Œåˆ™åº”è¯¥ç”¨ <code>delete[] p;</code> (array delete expression) çš„å½¢å¼å›æ”¶ï¼Œå¦åˆ™æ˜¯æœªå®šä¹‰è¡Œä¸º (UB, undefined behavior)<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/expr.delete#2">expr.delete#2</a></sup>ï¼›è¿™ç§æƒ…å†µä¸‹ä»»ä½•æƒ…å†µéƒ½æœ‰å¯èƒ½å‘ç”Ÿï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼ˆä¸éœ€è¦è¯Šæ–­ä¿¡æ¯çš„ï¼‰ç¼–è¯‘é”™è¯¯ã€è¿è¡Œæ—¶é”™è¯¯ï¼Œæˆ–äº§ç”Ÿæ„æ–™ä¹‹å¤–çš„è¿è¡Œç»“æœç­‰ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸­å…·ä½“è®¨è®ºæœªå®šä¹‰è¡Œä¸ºã€‚</p>
<p>å…³äº <code>new</code> å’Œ <code>delete</code>ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€äº›è¯é¢˜æ²¡æœ‰è®¨è®ºï¼Œä¾‹å¦‚ <code>operator new</code> ç­‰ä»¥åŠ placement newã€‚æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸­è®¨è®ºç›¸å…³é—®é¢˜ã€‚</p>
<h2 id="-å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½">â–² å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½<a class="headerlink" href="#-å‡½æ•°é»˜è®¤å‚æ•°ä¸å‡½æ•°é‡è½½" title="Permanent link">&para;</a></h2>
<h3 id="é»˜è®¤å‚æ•°">é»˜è®¤å‚æ•°<a class="headerlink" href="#é»˜è®¤å‚æ•°" title="Permanent link">&para;</a></h3>
<p>è¿™æ ·çš„æ„é€ å‡½æ•°å…è®¸ç”¨æˆ·ä¼ é€’ä¸€ä¸ªåˆå§‹å¤§å°ï¼Œç„¶åç›´æ¥å¼€ä¸€ä¸ªå¯¹åº”å¤§å°çš„ç©ºé—´ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">elem</span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Container</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">elem</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>é‚£ä¹ˆï¼Œå‡å¦‚æˆ‘ä»¬å¸Œæœ›ç”¨æˆ·æ—¢å¯ä»¥ç»™å®šå¤§å°ï¼Œä¹Ÿèƒ½å¤Ÿåœ¨ä¸çŸ¥é“è¦å¼€å¤šå¤§çš„æƒ…å†µä¸‹ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å¤§å°ï¼Œæ€ä¹ˆåŠå‘¢ï¼ŸC++ åœ¨å‡½æ•°å£°æ˜ä¸­æ”¯æŒ <strong>é»˜è®¤å‚æ•° (default arguments)</strong>ï¼Œç”¨æ¥å…è®¸å‡½æ•°å¯ä»¥ä»¥çœç•¥æœ«å°¾çš„è‹¥å¹²å‚æ•°çš„æ–¹å¼è°ƒç”¨ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">point</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>

<span class="n">point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// calls point(1, 2)</span>
<span class="n">point</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">    </span><span class="c1">// calls point(1, 4)</span>
<span class="n">point</span><span class="p">();</span><span class="w">     </span><span class="c1">// calls point(3, 4)</span>
</code></pre></div>
<p>é»˜è®¤å‚æ•°å¿…é¡»å‡ºç°åœ¨æœ«å°¾çš„è‹¥å¹²ä¸ªå‚æ•°ä¸­ã€‚è¿™ä¸ªè¦æ±‚çš„åˆç†æ€§å®¹æ˜“ç†è§£ï¼šå‡å¦‚æ²¡æœ‰è¿™ä¸ªè¦æ±‚ï¼Œé‚£ä¹ˆå¦‚æœæœ‰ <code>void point(int x = 3, int y);</code>ï¼Œåˆ™ <code>point(4);</code> çš„å«ä¹‰æ˜¯å®¹æ˜“è®©äººè¿·æƒ‘çš„ã€‚</p>
<p>å› æ­¤ï¼Œ<code>Container</code> ç±»çš„æ„é€ å‡½æ•°å¯ä»¥å†™æˆï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">elem</span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="k">public</span><span class="o">:</span>
<span class="hll"><span class="w">    </span><span class="n">Container</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">512</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span class="w">        </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">elem</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>è¿™æ ·ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>Container c1;</code> æ„é€ ä¸€ä¸ªé»˜è®¤å¤§å° (512) çš„å®¹å™¨ï¼Œæˆ–è€…ç”¨ <code>Container c2(64);</code> æ„é€ ä¸€ä¸ªè‡ªå®šä¹‰å¤§å°çš„å®¹å™¨äº†ã€‚å‰è€…å®é™…ä¸Šæ˜¯ <code>Container(512)</code>ï¼Œè€Œåè€…æ˜¯ <code>Container(64)</code>ã€‚</p>
<details class="info">
<summary>è¡¥å……</summary>
<p>å¯¹äºéæ¨¡æ¿å‡½æ•°ï¼Œå¦‚æœå·²å£°æ˜çš„å‡½æ•°åœ¨ <strong>åŒä¸€ä½œç”¨åŸŸ</strong> ä¸­é‡æ–°å£°æ˜ï¼ˆåœ¨å†…éƒ¨ä½œç”¨åŸŸå†…çš„é‡æ–°å£°æ˜ä¼šå‡ºå‘ä½œç”¨åŸŸå±è”½ï¼‰ï¼Œåˆ™å¯ä»¥å‘è¯¥å‡½æ•°æ·»åŠ é»˜è®¤å‚æ•°ã€‚åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œé»˜è®¤å€¼æ˜¯è¯¥å‡½æ•°æ‰€æœ‰å¯è§å£°æ˜ä¸­æä¾›çš„é»˜è®¤å€¼çš„å¹¶é›†ã€‚å¯¹äºé»˜è®¤å€¼å·²ç»å¯è§çš„å‚æ•°ï¼Œé‡æ–°å£°æ˜ä¸èƒ½å¼•å…¥é»˜è®¤å€¼ï¼ˆå³ä½¿å€¼ç›¸åŒï¼‰ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">);</span><span class="w">     </span><span class="c1">// #1 </span>
<span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">);</span><span class="w"> </span><span class="c1">// #2 OK: adds a default</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">h</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span><span class="w"> </span><span class="c1">// #1 and #2 are in scope; makes a call to f(3,7)</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">);</span><span class="w"> </span><span class="c1">// Error: inner scope declarations don&#39;t acquire defaults</span>
<span class="p">}</span>
</code></pre></div>
<p>å¸¦é»˜è®¤å‚æ•°çš„å‹å…ƒå‡½æ•°å£°æ˜å¿…é¡»æ˜¯ä¸€ä¸ªå®šä¹‰ï¼Œä¸” translation unit ä¸­ä¸èƒ½æœ‰å…¶ä»–å£°æ˜ã€‚</p>
<p>é»˜è®¤å‚æ•°ä¸å…è®¸ä½¿ç”¨å±€éƒ¨å˜é‡ï¼Œé™¤éå®ƒä»¬ not evaluatedï¼ˆæ¯”å¦‚ <code>sizeof n</code>ï¼Œå‚è§ std notes 6.3ï¼‰ã€‚</p>
<p>é™¤äº†å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ <code>operator()</code> ä¹‹å¤–çš„è¿ç®—ç¬¦é‡è½½ä¸èƒ½æœ‰é»˜è®¤å‚æ•°ã€‚</p>
</details>
<h3 id="å‡½æ•°é‡è½½">å‡½æ•°é‡è½½<a class="headerlink" href="#å‡½æ•°é‡è½½" title="Permanent link">&para;</a></h3>
<p>é‚£ä¹ˆï¼Œå‡å¦‚æˆ‘å¸Œæœ›æ ¹æ®æ˜¯å¦ä¼ å…¥æŸä¸ªå‚æ•°æ¥é€‰æ‹©ä¸åŒçš„æ„é€ å‡½æ•°ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿä¾‹å¦‚æˆ‘ä»¬å¸Œæœ› <code>Container</code> çš„æ„é€ å‡½æ•°é•¿è¿™æ ·ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="n">Container</span><span class="o">::</span><span class="n">Container</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="n">initVal</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">elem</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">);</span><span class="w">   </span><span class="c1">// allocate memory</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">       </span><span class="c1">// set init values</span>
<span class="w">        </span><span class="n">val</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initVal</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ä½†æ˜¯ï¼æˆ‘ä»¬å¸Œæœ›å¦‚æœæ²¡æœ‰ä¼ å…¥ <code>initVal</code>ï¼Œå°±ä¸è¦åšé‚£ä¸ª set init values çš„å¾ªç¯æ€ä¹ˆåŠå‘¢ï¼Ÿå›ºç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡é»˜è®¤å‚æ•°ç»“åˆåˆ¤æ–­æ¥å®ç°ï¼Œä½†æ˜¯å‡å¦‚æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„ä¼ å…¥å‚æ•°æ¥ä½¿ç”¨ä¸åŒçš„æ„é€ å‡½æ•°å°±æ›´å¥½äº†ï¼</p>
<p>äº‹å®ä¸Šï¼ŒC++ æ”¯æŒè¿™æ ·çš„æ“ä½œï¼Œè¿™è¢«ç§°ä¸º <strong>å‡½æ•°é‡è½½ (function overloading)</strong>ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">elem</span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Container</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">Container</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">elem</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">Container</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">elem</span><span class="w"> </span><span class="n">initVal</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">elem</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">    </span>
<span class="w">            </span><span class="n">val</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initVal</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
<p>è¿™æ ·ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ <code>Container c1, c2(4), c3(6, 2);</code> å®šä¹‰ä¸‰ä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒä»¬ä¼šåˆ†åˆ«ä½¿ç”¨æ— å‚ã€ä¸€ä¸ªå‚æ•°å’Œä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼š</p>
<p><center><img alt="" src="../2023-03-03-14-45-31.png" /></center></p>
<p>äº‹å®ä¸Šï¼Œä¸ä»…æ˜¯æ„é€ å‡½æ•°æ”¯æŒé‡è½½ï¼Œå…¶ä»–çš„æˆå‘˜å‡½æ•°æˆ–è€…ç‹¬ç«‹çš„å‡½æ•°<sup id="fnref:namespace-scope"><a class="footnote-ref" href="#fn:namespace-scope">17</a></sup>ä¹Ÿæ”¯æŒé‡è½½ã€‚ä¾‹å¦‚<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/over.pre#2">over.pre#2</a></sup>ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="kt">double</span><span class="w"> </span><span class="nf">abs</span><span class="p">(</span><span class="kt">double</span><span class="p">);</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">abs</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

<span class="n">abs</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">             </span><span class="c1">// calls abs(int);</span>
<span class="n">abs</span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span><span class="w">           </span><span class="c1">// calls abs(double);</span>
</code></pre></div>
<p>å¦‚æœä¸€ä¸ªåå­—å¼•ç”¨å¤šä¸ªå‡½æ•°ï¼Œåˆ™ç§°å®ƒæ˜¯ overloaded çš„ã€‚å½“ä½¿ç”¨è¿™æ ·çš„åå­—çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ªï¼›è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º <strong>é‡è½½è§£æ (overload resolution)</strong>ã€‚ç®€å•æ¥è¯´ï¼Œé‡è½½è§£æé¦–å…ˆæ”¶é›†è¿™ä¸ªåå­—èƒ½æ‰¾åˆ°çš„å‡½æ•°å½¢æˆå€™é€‰å‡½æ•°é›† (candidate functions)ï¼Œç„¶åæ£€æŸ¥å‚æ•°åˆ—è¡¨æ¥å½¢æˆå¯è¡Œå‡½æ•°é›† (viable functions)ï¼Œç„¶ååœ¨å¯è¡Œå‡½æ•°é›†ä¸­æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æ¯”è¾ƒè¿™äº›å‡½æ•°ï¼Œå¦‚æœ <strong>æ°å¥½</strong> æœ‰ä¸€ä¸ªå‡½æ•° (best viable function) ä¼˜äºå…¶ä»–æ‰€æœ‰å‡½æ•°ï¼Œåˆ™é‡è½½è§£ææˆåŠŸå¹¶è°ƒç”¨æ­¤å‡½æ•°ï¼›å¦åˆ™ç¼–è¯‘å¤±è´¥ã€‚</p>
<p>ä¸Šé¢çš„ã€Œè§„åˆ™ã€æ¯”è¾ƒå¤æ‚<sup id="fnref:overload_resolution"><a class="footnote-ref" href="#fn:overload_resolution">18</a></sup>ï¼Œä½†æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­æ˜¯ï¼Œä¸éœ€è¦ç±»å‹è½¬æ¢çš„æ¯”éœ€è¦çš„è¦å¥½<sup id="fnref:rank_of_conversion"><a class="footnote-ref" href="#fn:rank_of_conversion">19</a></sup>ï¼š</p>
<p><center><img alt="" src="../2023-03-03-16-03-41.png" /></center></p>
<p>å› æ­¤ï¼Œä¸Šé¢ç¬¬ 5 è¡Œçš„ <code>f(0L);</code> ä¸­ <code>0L</code> æ˜¯ <code>long</code> ç±»å‹çš„å­—é¢é‡ï¼Œå®ƒè°ƒç”¨ <code>void f(long)</code> ä¸éœ€è¦è½¬æ¢ï¼Œè€Œè°ƒç”¨ <code>void f(float)</code> éœ€è¦è½¬æ¢ï¼Œå› æ­¤é€‰å–å‰è€…ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¸Šé¢ç¬¬ 6 è¡Œçš„ <code>f(0);</code> ä¸­ <code>0</code> æ˜¯ <code>int</code> ç±»å‹çš„å­—é¢é‡ï¼Œå®ƒè°ƒç”¨ä¸¤ä¸ªå‡½æ•°éƒ½éœ€è¦è½¬æ¢ï¼Œä¸”ä¸¤ä¸ªè½¬æ¢æ²¡æœ‰ä¸€ä¸ªä¼˜äºå¦ä¸€ä¸ª<sup id="fnref2:rank_of_conversion"><a class="footnote-ref" href="#fn:rank_of_conversion">19</a></sup>ï¼Œå› æ­¤æ‰¾ä¸åˆ° best viable functionï¼Œå› æ­¤ç¼–è¯‘é”™è¯¯ã€‚</p>
<p>ä¹Ÿæ˜¯å› æ­¤ï¼Œä¸¤ä¸ªåªæœ‰è¿”å›å€¼ç±»å‹ä¸åŒçš„å‡½æ•°ä¸æ˜¯åˆæ³•çš„é‡è½½ï¼Œå› ä¸ºè°ƒç”¨æ—¶æ²¡æœ‰åŠæ³•å®Œæˆé‡è½½è§£æï¼š</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">);</span><span class="w">  </span><span class="c1">// error: functions that differ only in </span>
<span class="w">                </span><span class="c1">// their return type cannot be overloaded</span>
</code></pre></div>
<p>æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚å…·ä½“è®¨è®ºé‡è½½è§£æçš„ç»†èŠ‚ã€‚</p>
<div class="admonition note">
<p class="admonition-title">nullptr</p>
<p>æˆ‘ä»¬åœ¨å‰é¢çš„ç« èŠ‚çœ‹åˆ°äº† <code>nullptr</code>ï¼Œè¿™æ˜¯ C++11 å¼•å…¥çš„ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨æ¥è¡¨ç¤ºç©ºæŒ‡é’ˆã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦å¼•å…¥è¿™ä¸ªä¸œè¥¿å‘¢ï¼Ÿæˆ‘ä»¬é¦–å…ˆè¦æåˆ°ä¸€ä¸ªäº‹å®ï¼šä¸ºäº†ç±»å‹å®‰å…¨ï¼ŒC++ ä¸å…è®¸ <code>void*</code> éšå¼è½¬æ¢åˆ°å…¶ä»–æŒ‡é’ˆç±»å‹ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬å°† <code>NULL</code> å®šä¹‰ä¸º <code>(void*) 0</code>ï¼Œé‚£ä¹ˆ <code>int * p = NULL;</code> ä¼šå¼•å‘ç¼–è¯‘é”™è¯¯ï¼š</p>
<p><center><img alt="" src="../2023-03-03-16-20-49.png" /></center></p>
<p>ï¼ˆè¿™æ˜¯ C++ ä¸ C ä¸å…¼å®¹çš„ä¾‹å­ä¹‹ä¸€ã€‚ï¼‰</p>
<p>æ—¢ç„¶ C++ ä¸å…è®¸å°† <code>(void*) 0</code> å½“ç©ºæŒ‡é’ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬ç”¨ä»€ä¹ˆè¡¨ç¤ºç©ºæŒ‡é’ˆå‘¢ï¼Ÿåœ¨ C++11 ä¹‹å‰ï¼Œç©ºæŒ‡é’ˆå¸¸é‡ (null pointer constant) æ˜¯å€¼ä¸º 0 çš„æ•´å‹å­—é¢é‡<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/conv.ptr#1">conv.ptr#1</a></sup>ã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬å°† <code>NULL</code> å®šä¹‰ä¸º <code>0</code>ï¼Œåˆ™ <code>int * p = NULL;</code> å³ <code>int * p = 0;</code> æ˜¯åˆæ³•çš„ï¼ˆèµ‹å€¼æˆå…¶ä»–æ•´æ•°æ˜¯ä¸åˆæ³•çš„ï¼‰ã€‚</p>
<p>ä½†æ˜¯ï¼é—®é¢˜æ¥äº†â€”â€”</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

<span class="cp">#define NULL 0</span>
<span class="n">f</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span><span class="w">   </span><span class="c1">// ==&gt; f(0) , so f(int) is called</span>
</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé‡è½½ä½¿å¾—ä¸Šé¢çš„æƒ…å†µå¯èƒ½å¼•èµ·è¯¯è§£ï¼Œé€ æˆæ„æ–™ä¹‹å¤–çš„ç»“æœã€‚</p>
<p>å› æ­¤ï¼ŒC++11 å¼•å…¥äº† <code>nullptr</code> æ¥è¡¨ç¤ºç©ºæŒ‡é’ˆå¸¸é‡ã€‚è¿™æ ·å°±è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

<span class="n">f</span><span class="p">(</span><span class="k">nullptr</span><span class="p">);</span><span class="w">   </span><span class="c1">// f(int *) is called</span>
</code></pre></div>
<p>å› ä¸º null pointer constant å¯ä»¥è½¬æ¢åˆ°ä»»æ„æŒ‡é’ˆç±»å‹<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/conv.ptr#1">conv.ptr#1</a></sup>ã€‚</p>
<p>å½“ç„¶ï¼Œä¸ºäº†å…¼å®¹ï¼Œå€¼ä¸º 0 çš„æ•´å‹å­—é¢é‡ä»ç„¶æ˜¯ç©ºæŒ‡é’ˆå¸¸é‡ã€‚</p>
</div>
<p>è€ƒè™‘å‡½æ•°é‡è½½å’Œé»˜è®¤å‚æ•°å…±åŒä½¿ç”¨çš„æƒ…å†µï¼Œäº‹å®ä¸Šä»ç„¶èƒ½é€šè¿‡ä¸Šé¢ã€Œé‡è½½è§£æã€çš„æ–¹å¼å¤„ç†ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">();</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">   </span><span class="c1">// OK, call the first one</span>
<span class="w">    </span><span class="n">f</span><span class="p">();</span><span class="w">    </span><span class="c1">// Error: ambiguous</span>
<span class="p">}</span>
</code></pre></div>
<p>ä¸è¿‡æˆ‘ä»¬å¯èƒ½ä¼šå‘ç°ï¼Œå‡½æ•°é‡è½½çš„ä½œç”¨å·²ç»è¶³ä»¥è¦†ç›–é»˜è®¤å‚æ•°çš„ä½œç”¨ã€‚äº‹å®ä¸Šç¡®å®å¦‚æ­¤ï¼šé»˜è®¤å‚æ•°æœºåˆ¶åœ¨ C with Classes æ—¶å°±å­˜åœ¨äº†ï¼Œå…¶æ„ä¹‰å°±æ˜¯å‰é¢ç»™å‡ºçš„æ„é€ å‡½æ•°ä¸­é»˜è®¤å‚æ•°çš„ä¾‹å­ï¼›è€Œä¸€èˆ¬çš„å‡½æ•°é‡è½½ç›´åˆ° Release 1.0 æ‰è¢«å¼•å…¥ã€‚é»˜è®¤å‚æ•°æœºåˆ¶æ˜¯é‡è½½æœºåˆ¶çš„å‰é©±ä¹‹ä¸€ï¼›é‡è½½æœºåˆ¶çš„å¦ä¸€ä¸ªå‰é©±æ˜¯ <code>operator =</code> çš„é‡è½½ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚çœ‹åˆ°å®ƒã€‚</p>
<div class="admonition info">
<p class="admonition-title">é‡è½½å¦‚ä½•å¤„ç†é“¾æ¥é—®é¢˜</p>
<p>ä¸€ç§å®ç°æ˜¯ï¼Œå°† <code>void foo(int i);</code> äº§ç”Ÿçš„å‡½æ•°åå­—ç§°ä¸º <code>foo_Fi</code>ï¼Œ<code>void foo(int i, char *j);</code> äº§ç”Ÿçš„å‡½æ•°åå­—ç§°ä¸º <code>foo_FiPc</code> ä¹‹ç±»çš„ã€‚è¿™åŒæ—¶èƒ½å¤Ÿå®Œæˆåœ¨é“¾æ¥æ—¶çš„ç±»å‹å®‰å…¨æ£€æŸ¥ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸ºäº†å’Œ C é“¾æ¥ï¼ŒC++ å¼•å…¥äº†æ‰©å…… <code>extern "C" { ... }</code>ï¼Œä»è€Œå‘Šè¯‰ç¼–è¯‘å™¨åœ¨è¿™äº›éƒ¨åˆ†é‡‡ç”¨ C çš„å‘½åä¹ æƒ¯ã€‚</p>
</div>
<h2 id="43-æ„é€ å‡½æ•°-cont">4.3 æ„é€ å‡½æ•° (Cont.)<a class="headerlink" href="#43-æ„é€ å‡½æ•°-cont" title="Permanent link">&para;</a></h2>
<p>å…³äºæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜æœ‰å‡ ä¸ªé—®é¢˜å¯ä»¥è®¨è®ºï¼</p>
<h3 id="implicitly-declared-default-constructor">implicitly-declared default constructor<a class="headerlink" href="#implicitly-declared-default-constructor" title="Permanent link">&para;</a></h3>
<p>æˆ‘ä»¬ç§°ä¸€ä¸ªèƒ½å¤Ÿæ— å‚è°ƒç”¨çš„æ„é€ å‡½æ•°æ˜¯ default constructorã€‚å³ï¼Œå®ƒä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œæˆ–è€…æ‰€æœ‰å‚æ•°éƒ½æœ‰é»˜è®¤å€¼ã€‚</p>
<p>æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬åœ¨è®²æ„é€ å‡½æ•°ä¹‹å‰çš„ä»£ç é‡Œéƒ½æ²¡æœ‰å†™æ„é€ å‡½æ•°ï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿèƒ½æ­£å¸¸ç¼–è¯‘è¿è¡Œï¼C++ ä¹Ÿå¸Œæœ›åœ¨æ²¡æœ‰å¿…è¦çš„ç†ç”±æ—¶ä¸ä¸ C å‘ç”Ÿä¸å…¼å®¹ï¼Œè€Œ C ä¸­çš„ struct ä¹Ÿæ²¡æœ‰å†™æ„é€ å‡½æ•°ï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿèƒ½è¢«è¿è¡Œã€‚è¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ</p>
<p>äº‹å®ä¸Šï¼Œå¯¹äºä¸€ä¸ªç±»ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›ä»»ä½•æ„é€ å‡½æ•°ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºè¿™ä¸ªç±»åˆ›å»ºä¸€ä¸ª public çš„ implicitly-declared default constructorï¼Œå®ƒè¢«å®šä¹‰ä¸º defaultedã€‚Defaulted çš„æ„é€ å‡½æ•°ä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œä¹Ÿä»€ä¹ˆéƒ½ä¸åšã€‚å¦‚æœæœ‰ä»»ä½•ç”¨æˆ·æä¾›çš„æ„é€ å‡½æ•°<sup id="fnref:default_ctor"><a class="footnote-ref" href="#fn:default_ctor">20</a></sup>ï¼Œåˆ™ defaulted default constructor è¢«å®šä¹‰ä¸º deleted çš„ã€‚deleted çš„å‡½æ•°ä¸èƒ½è¢«è°ƒç”¨ã€‚</p>
<p>ä¸è¿‡ï¼Œå¦‚æœç”¨æˆ·æä¾›äº†æ„é€ å‡½æ•°ï¼Œä»–ä»ç„¶å¯ä»¥ç”¨ <code>ClassName() = default;</code> æ¥å¼•å…¥ defaulted çš„æ„é€ å‡½æ•°ã€‚</p>
<p>ç”¨æˆ·è¿˜å¯ä»¥é€šè¿‡ <code>ClassName() = delete;</code> æ˜¾å¼åœ°å°† default constructor è®¾ç½®æˆ deleted çš„ã€‚</p>
<h3 id="member-initializer-lists">member initializer lists<a class="headerlink" href="#member-initializer-lists" title="Permanent link">&para;</a></h3>
<div class="admonition success">
<p class="admonition-title">æ€»ç»“</p>
<p>å¦‚æœæ‚¨å¹¶éåˆå­¦è€…ï¼Œ<a href="../summaries/member_init_lists/">è¿™é‡Œ</a> æœ‰å…³äºè¯¥è¯é¢˜æ›´è¯¦å°½çš„æ€»ç»“ã€‚</p>
</div>
<p>ä¸€ä¸ªé—®é¢˜æ˜¯è¿™æ ·çš„ï¼šå‡å¦‚æˆ‘ä»¬å¸Œæœ›æ ¹æ®æ„é€ å‡½æ•°çš„ä¸€äº›å‚æ•°æ¥åˆå§‹åŒ–ä¸€äº›æˆå‘˜ï¼Œæˆ‘ä»¬å›ºç„¶å¯ä»¥è¿™æ ·å†™ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">failTimes</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">password</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">User</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pw</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="w">        </span><span class="n">failTimes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">copyStr</span><span class="p">(</span><span class="n">pw</span><span class="p">);</span><span class="w"> </span><span class="c1">// assume that `copyStr` gets a string and allocate some space and copy it</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>ä½†æ˜¯è¿™æ ·å¾ˆç´¯ï¼äºæ˜¯ C++ å…è®¸è¿™æ ·çš„å†™æ³•ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">failTimes</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">password</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">User</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pw</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"> </span><span class="n">age</span><span class="p">(</span><span class="n">age</span><span class="p">),</span><span class="w"> </span><span class="n">failTimes</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">password</span><span class="p">(</span><span class="n">copyStr</span><span class="p">(</span><span class="n">pw</span><span class="p">))</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>æ„é€ å‡½æ•°å®šä¹‰ä¸­å½¢å¦‚ <code>: member(expr), member(expr)</code> çš„ä¸œè¥¿å«åš member initializer lists<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class#base.init-1">class#base.init-1</a></sup>ï¼Œç”¨æ¥æŒ‡æ˜æˆå‘˜å˜é‡çš„åˆå§‹åŒ–å™¨ (initializer)ã€‚è¿™äº›åˆå§‹åŒ–ä¼šåœ¨æ„é€ å‡½æ•°çš„å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰å®Œæˆã€‚</p>
<p>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œmember initializer lists æ˜¯å¿…è¦çš„ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Point</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Circle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Circle</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">cx</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">cy</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">c</span><span class="p">(</span><span class="n">cx</span><span class="p">,</span><span class="w"> </span><span class="n">cy</span><span class="p">),</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>C++ è§„å®šï¼Œåœ¨æ„é€ å‡½æ•°çš„å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰ï¼Œæ‰€æœ‰å‚æ•°è¦ä¹ˆæŒ‰ç…§ member initializer lists çš„æè¿°åˆå§‹åŒ–ï¼Œè¦ä¹ˆä»¥é»˜è®¤æ–¹å¼åˆå§‹åŒ–<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.base.init#13">class.base.init#13</a></sup>ã€‚è€Œå¯¹äºç±»çš„å¯¹è±¡ï¼Œã€Œé»˜è®¤æ–¹å¼åˆå§‹åŒ–ã€æ„å‘³ç€ä½¿ç”¨ default constructor æ„é€ ã€‚ç„¶è€Œï¼Œ<code>Point</code> ç±»å¹¶æ²¡æœ‰ default constructorï¼Œå› æ­¤å¦‚æœ member initializer lists æ²¡æœ‰æŒ‡æ˜ <code>Point</code> ç±»çš„åˆå§‹åŒ–æ–¹å¼ï¼Œå°±ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ï¼š</p>
<p><center><img alt="" src="../2023-03-04-03-11-28.png" /></center></p>
<p>åœ¨åé¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°æ›´å¤š member initializer lists æ˜¯å¿…è¦çš„çš„æƒ…å†µã€‚</p>
<details class="note" open="open">
<summary>è¡¥å……</summary>
<p>å¦‚æœæ„é€ å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰åˆ†ç¦»ï¼Œåˆ™ member initializer lists åº”å½“å‡ºç°åœ¨æ„é€ å‡½æ•°çš„å®šä¹‰ä¸­ã€‚</p>
<p>member initializer list çš„é¡ºåºä¸å½±å“æˆå‘˜è¢«åˆå§‹åŒ–çš„é¡ºåºï¼Œå®ƒä»¬æŒ‰ç…§åœ¨ç±»å®šä¹‰ä¸­çš„é¡ºåºåˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼š</p>
<p><center><img alt="" src="../2023-03-04-03-20-24.png" /></center></p>
</details>
<h4 id="delegating-constructor">delegating constructor<a class="headerlink" href="#delegating-constructor" title="Permanent link">&para;</a></h4>
<p>member initializer list å¯ä»¥å°†æ„é€ å§”æ‰˜ç»™åŒä¸€ç±»å‹çš„å¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåšå‡ºè¿™ä¸€å§”æ‰˜çš„æ„é€ å‡½æ•°ç§°ä¸º delegating constructorï¼›å¦‚æœè¿™æ ·çš„è¯ï¼Œmember initializer list åº”å½“åªåŒ…å«è¿™ä¸€ä¸ªé¡¹ç›®ã€‚ç›®æ ‡æ„é€ å‡½æ•°ç”±é‡è½½è§£æé€‰å–ï¼Œå…¶è¿è¡Œç»“æŸåï¼Œdelegating constructor çš„å‡½æ•°ä½“è¢«æ‰§è¡Œ<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.base.init#6">class.base.init#6</a></sup>ã€‚ä¸€ä¸ªæ„é€ å‡½æ•°ä¸èƒ½ç›´æ¥æˆ–é—´æ¥åœ°è¢«å§”æ‰˜ç»™è‡ªå·±ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">C</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">C</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">                  </span><span class="c1">// #1: non-delegating constructor</span>
<span class="w">    </span><span class="n">C</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">                </span><span class="c1">// #2: delegates to #1</span>
<span class="w">    </span><span class="n">C</span><span class="p">(</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="mf">42.0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">     </span><span class="c1">// #3: ill-formed due to recursion with #4</span>
<span class="w">    </span><span class="n">C</span><span class="p">(</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">C</span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">    </span><span class="c1">// #4: ill-formed due to recursion with #3</span>
<span class="p">};</span>
</code></pre></div>
<p><center><img alt="" src="../2023-03-04-03-15-43.png" /></center></p>
<p>å¯è§ï¼Œè¢«å§”æ‰˜çš„ç›®æ ‡æ„é€ å‡½æ•°è¿è¡Œå®Œè¾“å‡º <code>ctor1 called</code> åï¼Œå§”æ‰˜æ„é€ å‡½æ•°è¿è¡Œï¼Œè¾“å‡º <code>ctor2 called</code>ã€‚</p>
<h3 id="default-member-initializer">default member initializer<a class="headerlink" href="#default-member-initializer" title="Permanent link">&para;</a></h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰è‹¥å¹²ä¸ªæ„é€ å‡½æ•°ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">failTimes</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">password</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">User</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pw</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"> </span><span class="n">age</span><span class="p">(</span><span class="n">age</span><span class="p">),</span><span class="w"> </span><span class="n">failTimes</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">password</span><span class="p">(</span><span class="n">copyStr</span><span class="p">(</span><span class="n">pw</span><span class="p">))</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="n">User</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"> </span><span class="n">age</span><span class="p">(</span><span class="n">age</span><span class="p">),</span><span class="w"> </span><span class="n">failTimes</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">password</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="n">User</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"> </span><span class="n">age</span><span class="p">(</span><span class="mi">-1</span><span class="p">),</span><span class="w"> </span><span class="n">failTimes</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">password</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä¹Ÿè®¸æƒ³è¦ç»™æ„é€ æ—¶æ²¡æœ‰æä¾›çš„å‚æ•°èµ‹ä¸€ä¸ªåˆå€¼ï¼›å¦‚æœåœ¨æ„é€ å‡½æ•°æˆ–è€… member initializer list ä¸­å†™åˆå§‹å€¼ï¼Œåˆ™æ‰€æœ‰æ„é€ å‡½æ•°éƒ½è¦å†™ä¸€ä»½ï¼Œè¿™æ˜¯æ¯”è¾ƒç´¯çš„ï¼äºæ˜¯ï¼ŒC++11 å¼•å…¥äº† default member initializer è§£å†³è¿™ä¸ªé—®é¢˜ï¼</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="n">failTimes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">User</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pw</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"> </span><span class="n">age</span><span class="p">(</span><span class="n">age</span><span class="p">),</span><span class="w"> </span><span class="n">password</span><span class="p">(</span><span class="n">copyStr</span><span class="p">(</span><span class="n">pw</span><span class="p">))</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="n">User</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">id</span><span class="p">),</span><span class="w"> </span><span class="n">age</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="n">User</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>å¦‚æœä¸€ä¸ªæˆå‘˜å˜é‡åŒæ—¶è¢« member initializer list æŒ‡å®šä¸”æœ‰ default member initializerï¼ŒæŒ‰å‰è€…æ‰§è¡Œï¼Œåè€…è¢«å¿½ç•¥ã€‚</p>
<p>default member initializer åªå…è®¸ <code>brace-or-equal-initializer</code> å³ <code>= something</code> æˆ–è€… <code>{ something }</code>ï¼Œè€Œä¸å…è®¸ç”¨æ‹¬å·çš„å½¢å¼<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.mem.general#nt:member-declarator">class.mem.general#nt:member-declarator</a></sup>ã€‚<code>{ something }</code> æ˜¯æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ brace initialization (uniform initialization)ï¼Œæˆ‘ä»¬åœ¨åé¢çš„ç« èŠ‚å…·ä½“è®¨è®ºã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå« default member initializer çš„æˆå‘˜å¯ä»¥å½¢å¦‚ <code>Foo f = Foo(...);</code>ï¼Œä½†ä¸èƒ½å½¢å¦‚ <code>Foo f(...);</code>ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Point</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Point</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="p">};</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Circle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Point c(0, 0);       // error</span>
<span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w">  </span><span class="c1">// OK</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Circle</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">cx</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">cy</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">c</span><span class="p">(</span><span class="n">cx</span><span class="p">,</span><span class="w"> </span><span class="n">cy</span><span class="p">),</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<h2 id="44-ææ„å‡½æ•°">4.4 ææ„å‡½æ•°<a class="headerlink" href="#44-ææ„å‡½æ•°" title="Permanent link">&para;</a></h2>
<p>æˆ‘ä»¬è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">elem</span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Container</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">elem</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p><code>Container</code> çš„æ¯ä¸ªå¯¹è±¡éƒ½ä¼š <code>malloc</code> ä¸€å—å†…å­˜ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œ<code>malloc</code> å‡ºæ¥çš„ç©ºé—´éœ€è¦æˆ‘ä»¬åœ¨ä¸ç”¨çš„æ—¶å€™æ‰‹åŠ¨ <code>free</code> æ¥å›æ”¶ã€‚é‚£ä¹ˆä»€ä¹ˆæ—¶å€™å®Œæˆè¿™ä¸ªå›æ”¶å‘¢ï¼Ÿæœ€å¥½çš„é€‰æ‹©æ˜¾ç„¶æ˜¯å½“å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»“æŸçš„æ—¶å€™ã€‚ç”Ÿå‘½å‘¨æœŸç»“æŸæ„å‘³ç€è¿™ä¸ªå¯¹è±¡å†ä¹Ÿæ— æ³•è¢«è®¿é—®ï¼Œå› æ­¤å®ƒçš„æˆå‘˜è‡ªç„¶ä¹Ÿæ— æ³•è¢«è®¿é—®ï¼›åœ¨è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°†å®ƒæ‰€æ‹¥æœ‰çš„èµ„æºï¼ˆå³æŒ‡é’ˆæˆå‘˜å˜é‡æŒ‡å‘çš„ <code>malloc</code> å‡ºæ¥çš„å†…å­˜ï¼‰é‡Šæ”¾ï¼Œæ—¢ä¸ä¼šå¤ªæ—©ï¼ˆå› ä¸ºåé¢ä¸ä¼šå†æœ‰ä½¿ç”¨äº†ï¼‰ï¼Œä¹Ÿä¸ä¼šå¤ªæ™šï¼ˆå› ä¸ºæ­¤æ—¶ä»ç„¶èƒ½çŸ¥é“é‚£äº›èµ„æºçš„åœ°å€ï¼‰ã€‚</p>
<p>å› æ­¤ï¼ŒC++ å¼•å…¥äº† <strong>ææ„å‡½æ•° (destructors)</strong> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼›ææ„å‡½æ•°åœ¨æ¯ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç»“æŸçš„æ—¶å€™è¢«è°ƒç”¨ï¼Œå¤§å¤šæ•°æƒ…å†µè¢«ç”¨æ¥é‡Šæ”¾å¯¹è±¡åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½è·å–çš„èµ„æºï¼Œä¾‹å¦‚é‡Šæ”¾ç”³è¯·çš„å†…å­˜ã€å…³é—­æ‰“å¼€çš„æ–‡ä»¶ç­‰ã€‚æˆ‘ä»¬ç¨åè®¨è®ºå„ç§å˜é‡çš„ç”Ÿå‘½å‘¨æœŸã€‚ææ„å‡½æ•°å½¢å¦‚ <code>~class-name()</code>ï¼Œå…¶ä¸­ <code>~</code> ä¹Ÿè¢«ç”¨ä½œå–åè¿ç®—ç¬¦ï¼Œè¿™é‡Œæ¥è¡¨ç¤ºã€Œä¸æ„é€ ç›¸åã€çš„å«ä¹‰ï¼Œå³ææ„ã€‚ä¸€ä¸ªä¾‹å­æ˜¯ï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">elem</span><span class="o">*</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Container</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">elem</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">~</span><span class="n">Container</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">free</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>9~11 è¡Œæ˜¯ææ„å‡½æ•°ã€‚è¿™é‡Œï¼Œææ„å‡½æ•°å°† <code>val</code> æŒ‡å‘çš„å†…å­˜é‡Šæ”¾ã€‚</p>
<p>ææ„å‡½æ•°çš„å‚æ•°åˆ—è¡¨æ°¸è¿œæ˜¯ç©ºçš„ã€‚æ˜¾ç„¶ï¼Œææ„å‡½æ•°æ˜¯æ— æ³•é‡è½½çš„ã€‚</p>
<p>ææ„å‡½æ•°å’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œå¦‚æœæŸä¸ªç±»æ²¡æœ‰ user-declared destructorï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª public çš„ implicitly-declared destructorï¼Œå®šä¹‰ä¸º defaultedã€‚å› æ­¤ï¼Œå½“ç±»çš„æˆå‘˜ä¸­æ²¡æœ‰ä»€ä¹ˆéœ€è¦é‡Šæ”¾çš„èµ„æºæ—¶ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†™ææ„å‡½æ•°äº†<sup id="fnref:rule_of_zero"><a class="footnote-ref" href="#fn:rule_of_zero">21</a></sup>ã€‚</p>
<p>ææ„å‡½æ•° destructor ä¹Ÿç»å¸¸è¢«ç®€å†™ä¸º dtor æˆ– d'tor ç­‰ã€‚</p>
<p>å½“ç„¶ï¼Œè‡ª C++11 èµ·ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡ <code>= default;</code> æˆ–è€… <code>= delete;</code> æ¥ç”Ÿæˆé»˜è®¤çš„ææ„å‡½æ•°ï¼Œæˆ–è€…åˆ é™¤ implicitly-declared destructorã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="o">~</span><span class="n">Foo</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>è¿™é‡Œæˆ‘ä»¬å‘ŠçŸ¥ç¼–è¯‘å™¨åœ¨ <code>private</code> èŒƒå›´å†…æ˜¾å¼ç”Ÿæˆäº†é»˜è®¤çš„æ„é€ å‡½æ•°ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">~</span><span class="n">Foo</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">delete</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>è¿™é‡Œæˆ‘ä»¬å°† implicitly-declared destructor æ ‡è®°ä¸º deletedã€‚</p>
<p>å¦‚æœ <code>Foo</code> çš„ææ„å‡½æ•°æ˜¯ deleted çš„ï¼Œæˆ–è€…åœ¨å½“å‰ä½ç½®ä¸å¯è®¿é—® (å¦‚å½“å‰åœ¨ç±»å¤–ï¼Œä½†æ˜¯ææ„å‡½æ•°æ˜¯ private çš„)ï¼Œé‚£ä¹ˆç±»ä¼¼ <code>Foo f;</code> çš„å…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡æˆ–è€…æˆå‘˜å˜é‡å®šä¹‰æ˜¯éæ³•çš„<sup id="fnref:private_or_deleted_dtor"><a class="footnote-ref" href="#fn:private_or_deleted_dtor">22</a></sup>ã€‚ä½†æ˜¯ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ <code>new</code> æ¥åˆ›å»ºä¸€ä¸ªåŠ¨æ€çš„å¯¹è±¡ï¼Œå› ä¸ºè¿™æ ·åˆ›å»ºçš„å¯¹è±¡å¹¶ä¸éšå¼åœ°åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…è°ƒç”¨ææ„å‡½æ•°ã€‚</p>
<p>ä¸æ„é€ å‡½æ•°ä¸åŒï¼Œææ„å‡½æ•°æ˜¯å¯ä»¥æ‰‹åŠ¨è°ƒç”¨çš„ã€‚æˆ‘ä»¬åœ¨åé¢è®¨è®º placement new çš„ç« èŠ‚è®¨è®ºè¿™ä¸ªé—®é¢˜<sup id="fnref:call_dtor"><a class="footnote-ref" href="#fn:call_dtor">23</a></sup>ã€‚</p>
<details class="note">
<summary>defaulted ctor &amp; dtor è¢« delete çš„æƒ…å†µ</summary>
<p>è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Foo</span><span class="p">(</span><span class="kt">int</span><span class="p">){}</span><span class="w"> </span><span class="p">};</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">f</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
</code></pre></div>
<p>å³ï¼Œ<code>Foo</code> ç±»å‹æ²¡æœ‰ default constructorï¼ˆå³å¯ä»¥æ— å‚è°ƒç”¨çš„æ„é€ å‡½æ•°ï¼‰ï¼›è€Œ <code>Bar</code> ç±»å‹ä¸­æœ‰ä¸€ä¸ª <code>Foo</code> ç±»å‹çš„å­å¯¹è±¡ <code>f</code>ã€‚<code>Bar</code> ç±»å‹å¹¶æ²¡æœ‰æä¾›æ„é€ å‡½æ•°ã€‚</p>
<p>æ ¹æ®æˆ‘ä»¬æ‰€è¯´ï¼Œå¦‚æœæ²¡æœ‰æä¾›æ„é€ å‡½æ•°ï¼Œåˆ™ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª implicitly-declared default constructorï¼›ä½†æ˜¯è¿™é‡Œè‡ªåŠ¨ç”Ÿæˆçš„æ„é€ å‡½æ•°å¹¶ä¸èƒ½å®Œæˆ <code>f</code> çš„åˆå§‹åŒ–ã€‚è¿™ç§æƒ…å†µæ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>ç±»ä¼¼åœ°ï¼Œè€ƒè™‘ä»¥ä¸‹å‡ ä¸ªåœºæ™¯ï¼š</p>
<p><code>Foo</code> çš„é»˜è®¤æ„é€ å‡½æ•°æ˜¯æœ‰æ­§ä¹‰çš„ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">Foo</span><span class="p">(){}</span>
<span class="w">    </span><span class="n">Foo</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">){}</span>
<span class="p">};</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">f</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
</code></pre></div>
<p><code>Foo</code> çš„ææ„å‡½æ•°æ˜¯ deleted çš„ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">~</span><span class="n">Foo</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">delete</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">f</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
</code></pre></div>
<p><code>Foo</code> çš„ææ„å‡½æ•°æ˜¯ private çš„ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">~</span><span class="n">Foo</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">f</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
</code></pre></div>
<p>æˆ–è€…ï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥å¯¹ç§°å»¶ä¼¸åˆ°ææ„å‡½æ•°ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">~</span><span class="n">Foo</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">Foo</span><span class="w"> </span><span class="n">f</span><span class="p">;</span><span class="w"> </span>
<span class="w">    </span><span class="n">Bar</span><span class="p">(){}</span>
<span class="p">};</span>
</code></pre></div>
<p>C++ è§„å®šï¼Œå½“ä»¥ä¸‹ä»»ä¸€æƒ…å†µå‘ç”Ÿæ—¶ï¼Œå…¶ defaulted çš„ default constructor è¢«å®šä¹‰ä¸º deleted çš„<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.default.ctor#2">class.default.ctor#2</a></sup>ï¼š</p>
<ul>
<li>æŸä¸ªæ²¡æœ‰ default member initializer çš„ subobject æ²¡æœ‰ default constructor</li>
<li>å¯¹æŸä¸ª subobject çš„å¯¹åº” constructor çš„é‡è½½è§£æå¾—åˆ°æ­§ä¹‰ï¼Œæˆ–è€…è§£æå‡ºçš„å‡½æ•°æ˜¯è¢«åˆ é™¤æˆ–åœ¨æ­¤å¤„ä¸å¯è®¿é—®çš„</li>
<li>æŸä¸ª subobject çš„ destructor æ˜¯è¢«åˆ é™¤æˆ–è€…åœ¨æ­¤å¤„ä¸å¯è®¿é—®çš„</li>
<li>ï¼ˆå…¶ä»–æƒ…å†µç•¥ï¼‰</li>
</ul>
<p>åŒæ—¶ï¼Œå¦‚æœæŸä¸ª subobject çš„ destructor æ˜¯è¢«åˆ é™¤æˆ–è€…åœ¨æ­¤å¤„ä¸å¯è®¿é—®çš„ï¼Œå…¶ defaulted çš„ dtor è¢«å®šä¹‰ä¸º deleted çš„<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.dtor#7">class.dtor#7</a></sup>ã€‚</p>
</details>
<h2 id="45-æ„é€ å’Œææ„çš„æ—¶æœºå’Œé¡ºåº">4.5 æ„é€ å’Œææ„çš„æ—¶æœºå’Œé¡ºåº<a class="headerlink" href="#45-æ„é€ å’Œææ„çš„æ—¶æœºå’Œé¡ºåº" title="Permanent link">&para;</a></h2>
<p>å¯¹äºä¸€ä¸ªç±»å¯¹è±¡ï¼Œå®ƒçš„ <strong>ç”Ÿå‘½å‘¨æœŸ (lifetime)</strong> è‡ªå®ƒçš„åˆå§‹åŒ–ï¼ˆæ„é€ ï¼‰å®Œæˆå¼€å§‹ï¼Œåˆ°å®ƒçš„ææ„å‡½æ•°è°ƒç”¨è¢«å¯åŠ¨ä¸ºæ­¢ã€‚</p>
<p>ä»»ä½•ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šå æ®ä¸€éƒ¨åˆ†å­˜å‚¨ï¼›è¿™éƒ¨åˆ†å­˜å‚¨çš„æœ€å°ç”Ÿå‘½å‘¨æœŸç§°ä¸ºè¿™ä¸ªå¯¹è±¡çš„ <strong>storage duration</strong>ã€‚å¯¹è±¡çš„ lifetime ç­‰äºæˆ–è¢«åŒ…å«äºå…¶ storage durationã€‚</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>è¿™é‡Œè¯´ã€Œæœ€å°ç”Ÿå‘½å‘¨æœŸã€ï¼Œæ˜¯å› ä¸ºå¯¹è±¡è¢«ææ„åï¼Œå¯¹åº”çš„å­˜å‚¨è™½ç„¶å¯ä»¥è¢«ç«‹åˆ»å›æ”¶ï¼Œä½†ä¹Ÿä¸ä¸€å®šç«‹åˆ»è¢«å›æ”¶ã€‚ä½†ã€Œæœ€å°ã€æä¾›çš„æ˜¯ä¸€ç§ä¿è¯ã€‚</p>
</div>
<p>åœ¨ C++11 ä¹‹å‰ï¼Œä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„ storage duration éƒ½æ˜¯å¦‚ä¸‹ä¸€ç§<sup id="fnref:thread_storage_duration"><a class="footnote-ref" href="#fn:thread_storage_duration">24</a></sup>ï¼š</p>
<ul>
<li><strong>automatic</strong> storage duration: æ²¡æœ‰è¢«å®šä¹‰ä¸º <code>static</code><sup id="fnref:auto"><a class="footnote-ref" href="#fn:auto">25</a></sup> çš„å±€éƒ¨å¯¹è±¡ã€‚<sup id="fnref:auto_opt"><a class="footnote-ref" href="#fn:auto_opt">26</a></sup></li>
<li><strong>static</strong> storage duration: non-local å¯¹è±¡ï¼Œæˆ–è€…è¢«å®šä¹‰ä¸º <code>static</code> çš„å±€éƒ¨å¯¹è±¡æˆ–è€…ç±»æˆå‘˜å¯¹è±¡ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚è®¨è®º <code>static</code> æˆå‘˜å¯¹è±¡ã€‚</li>
<li><strong>dynamic</strong> storage duration: <code>new</code> å‡ºæ¥çš„å¯¹è±¡ã€‚</li>
</ul>
<p>å­å¯¹è±¡ (subobjectï¼Œå¦‚æˆå‘˜å˜é‡) çš„ storage duration æ˜¯å®ƒæ‰€åœ¨çš„å¯¹è±¡çš„ storage durationã€‚</p>
<p>åœ¨ä¸‹é¢çš„æƒ…å†µä¸‹ï¼Œæ„é€ å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼š</p>
<ul>
<li>å¯¹äºå…¨å±€å¯¹è±¡ï¼Œåœ¨ <code>main()</code> å‡½æ•°è¿è¡Œä¹‹å‰ï¼Œæˆ–è€…åœ¨åŒä¸€ä¸ªç¼–è¯‘å•å…ƒå†…å®šä¹‰çš„ä»»ä¸€å‡½æ•°æˆ–å¯¹è±¡è¢«ä½¿ç”¨ä¹‹å‰ã€‚åœ¨åŒä¸€ä¸ªç¼–è¯‘å•å…ƒå†…ï¼Œå®ƒä»¬çš„æ„é€ å‡½æ•°æŒ‰ç…§å£°æ˜çš„é¡ºåºåˆå§‹åŒ–ã€‚</li>
<li>å¯¹äº static local variablesï¼Œåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œåˆ°å®ƒçš„å£°æ˜çš„æ—¶å€™<sup id="fnref:static_local"><a class="footnote-ref" href="#fn:static_local">27</a></sup>ã€‚</li>
<li>å¯¹äº automatic storage duration çš„å¯¹è±¡ï¼Œåœ¨å…¶å£°æ˜è¢«è¿è¡Œæ—¶ã€‚</li>
<li>å¯¹äº dynamic storage duration çš„å¯¹è±¡ï¼Œåœ¨å…¶ç”¨ <code>new</code> è¡¨è¾¾å¼åˆ›å»ºæ—¶ã€‚</li>
</ul>
<p>åœ¨ä¸‹é¢çš„æƒ…å†µä¸‹ï¼Œææ„å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼š</p>
<ul>
<li>å¯¹äº static storage duration çš„å¯¹è±¡ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶ï¼ŒæŒ‰ç…§ä¸æ„é€ ç›¸åçš„é¡ºåºã€‚</li>
<li>å¯¹äº automatic storage duration çš„å¯¹è±¡ï¼Œåœ¨æ‰€åœ¨çš„ block é€€å‡ºæ—¶ï¼ŒæŒ‰ç…§ä¸æ„é€ ç›¸åçš„é¡ºåºã€‚</li>
<li>å¯¹äº dynamic storage duration çš„å¯¹è±¡ï¼Œåœ¨ <code>delete</code> è¡¨è¾¾å¼ä¸­ã€‚</li>
<li>å¯¹äºä¸´æ—¶å¯¹è±¡ï¼Œå½“å…¶ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚è®¨è®ºä¸´æ—¶å¯¹è±¡åŠå…¶ç”Ÿå‘½å‘¨æœŸã€‚</li>
</ul>
<p>æ•°ç»„å…ƒç´ çš„ææ„å‡½æ•°è°ƒç”¨é¡ºåºä¸å…¶æ„é€ é¡ºåºç›¸åã€‚ç±»çš„æˆå‘˜çš„ææ„å‡½æ•°è°ƒç”¨é¡ºåºä¹Ÿä¸å…¶æ„é€ é¡ºåºç›¸åã€‚</p>
<p><img alt="" src="../2023-03-05-19-26-59.png" /></p>
<p>ä½œä¸ºä¸€ä¸ªç»ƒä¹ ï¼Œè¯·è¯´æ˜ä¸‹é¢çš„ä»£ç çš„è¾“å‡ºï¼š</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Count</span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="o">~</span><span class="n">Count</span><span class="p">();</span>

<span class="w">    </span><span class="n">Count</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">getS</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">sPlus</span><span class="p">(){</span>
<span class="w">        </span><span class="n">s</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>

<span class="n">Count</span><span class="o">::~</span><span class="n">Count</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">s</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;}</span>

<span class="n">Count</span><span class="w"> </span><span class="n">count5</span><span class="p">(</span><span class="mi">555</span><span class="p">);</span>
<span class="k">static</span><span class="w"> </span><span class="n">Count</span><span class="w"> </span><span class="nf">count6</span><span class="p">(</span><span class="mi">666</span><span class="p">);</span>
<span class="n">Count</span><span class="w"> </span><span class="nf">count7</span><span class="p">(</span><span class="mi">777</span><span class="p">);</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(){</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">Count</span><span class="w"> </span><span class="n">count9</span><span class="p">(</span><span class="mi">999</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Count</span><span class="w"> </span><span class="o">*</span><span class="n">count1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Count</span><span class="p">(</span><span class="mi">111</span><span class="p">);</span>
<span class="w">    </span><span class="n">Count</span><span class="w"> </span><span class="o">*</span><span class="n">count2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Count</span><span class="p">(</span><span class="mi">222</span><span class="p">);</span>

<span class="w">    </span><span class="n">Count</span><span class="w"> </span><span class="n">count3</span><span class="p">(</span><span class="mi">333</span><span class="p">);</span>
<span class="w">    </span><span class="n">Count</span><span class="w"> </span><span class="n">count4</span><span class="p">(</span><span class="mi">444</span><span class="p">);</span>

<span class="w">    </span><span class="n">f</span><span class="p">();</span>

<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">Count</span><span class="w"> </span><span class="n">count8</span><span class="p">(</span><span class="mi">888</span><span class="p">);</span>

<span class="w">    </span><span class="k">delete</span><span class="p">(</span><span class="n">count1</span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">Count</span><span class="w"> </span><span class="n">c</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">getS</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">sPlus</span><span class="p">());</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>ç­”æ¡ˆæ˜¯ <code>111 2 3 4 5 6 444 333 888 999 777 666 555</code>ã€‚</p>
<h2 id="46-å°ç»“">4.6 å°ç»“<a class="headerlink" href="#46-å°ç»“" title="Permanent link">&para;</a></h2>
<ul>
<li>ç±»çš„å®šä¹‰<ul>
<li>å®šä¹‰å¼•å…¥æ–°çš„ç±»å‹</li>
<li>class-key é€šå¸¸ä¸å¿…è¦</li>
</ul>
</li>
<li>å£°æ˜å’Œå®šä¹‰<ul>
<li>å®šä¹‰æ˜¯å£°æ˜çš„ä¸€ç§</li>
</ul>
</li>
<li>ç±»çš„æˆå‘˜<ul>
<li>type alias</li>
<li><code>this</code></li>
</ul>
</li>
<li>å‡½æ•°å†…è”</li>
<li>æ„é€ å‡½æ•°<ul>
<li>å»ºç«‹èµ·æŸç§ã€Œä¿è¯ã€</li>
<li>å¦‚ä½•æ— å‚æˆ–æœ‰å‚åœ°æ„é€ å¯¹è±¡</li>
<li><code>new</code>, <code>delete</code>, <code>new[]</code>, <code>delete[]</code></li>
<li>implicitly-declared default constructor</li>
<li><code>= default;</code>, <code>= delete</code></li>
<li>member initializer lists</li>
<li>delegating constructor</li>
<li>default member initializer</li>
</ul>
</li>
<li>å‡½æ•°é»˜è®¤å‚æ•°å’Œå‡½æ•°é‡è½½<ul>
<li>é‡è½½è§£æ</li>
<li>ä¸ºä»€ä¹ˆ C++ å¼•å…¥äº† <code>nullptr</code></li>
</ul>
</li>
<li>ææ„å‡½æ•°<ul>
<li>ç”¨æ¥å›æ”¶èµ„æº</li>
<li>ä¸ºä»€ä¹ˆææ„å‡½æ•°æ— æ³•é‡è½½</li>
</ul>
</li>
<li>æ„é€ å’Œææ„çš„æ—¶æœºå’Œé¡ºåº<ul>
<li>lifetime</li>
<li>storage duration<ul>
<li>automatic</li>
<li>static</li>
<li>dynamic</li>
</ul>
</li>
<li>æ„é€ å’Œææ„çš„æ—¶æœºå’Œé¡ºåº</li>
</ul>
</li>
</ul>
<hr />
<script>
function inFootnote(element) {
    let parent = element.parentNode;
    while (parent !== null) {
      if (parent.classList && parent.classList.contains("footnote")) {
        break;
      }
      parent = parent.parentNode;
    }
    return parent !== null;
}
</script>
<script>
function toggleVisibility() {
  const links = document.querySelectorAll('a');
  const buttons = document.querySelectorAll('.xyx-toggle');
  links.forEach(link => {
    if (!link.classList.contains('md-nav__link') &&
        !link.classList.contains('md-tabs__link') &&
        !link.classList.contains('md-source') &&
        !link.classList.contains('md-header__button') &&
        !link.closest('.md-nav__link') &&
        !link.closest('.md-tabs__link') &&
        !link.closest('.md-source') &&
        !link.closest('.footnote-backref') &&
        !link.closest('.footnote-ref') &&
        !link.closest('.md-header__button') &&
        !inFootnote(link)
        ) {
      if (link.style.display === 'none') {
        link.style.display = 'inline';
        for (const button of buttons) {
            button.innerHTML = 'ç‚¹å‡»æ­¤å¤„éšè—æ­£æ–‡æ‰€æœ‰é“¾æ¥';
        }
      } else {
        link.style.display = 'none';
        for (const button of buttons) {
            button.innerHTML = 'ç‚¹å‡»æ­¤å¤„æ˜¾ç¤ºæ­£æ–‡æ‰€æœ‰é“¾æ¥';
        }
      }
    }
  });
}
</script>
<script>
function toggleVisibilityFoot() {
  const links = document.querySelectorAll('a');
  const buttons = document.querySelectorAll('.xyx-toggle2');
  links.forEach(link => {
    if (link.closest('.footnote-backref') ||
        link.closest('.footnote-ref')) {
      if (link.style.display === 'none') {
        link.style.display = 'inline';
        for (const button of buttons) {
            button.innerHTML = 'ç‚¹å‡»æ­¤å¤„éšè—æœ¬æ–‡æ‰€æœ‰è„šæ³¨';
        }
      } else {
        link.style.display = 'none';
        for (const button of buttons) {
            button.innerHTML = 'ç‚¹å‡»æ­¤å¤„æ˜¾ç¤ºæœ¬æ–‡æ‰€æœ‰è„šæ³¨';
        }
      }
    }
  });

  const footnotes = document.querySelectorAll('.footnote');
  for (const footnote of footnotes) {
    if (footnote.style.display === 'none') {
      footnote.style.removeProperty('display');
    } else {
      footnote.style.display = 'none';
    }
  }
}
</script>

<p><center>
<button onclick="toggleVisibility()" class="box box-yellow xyx-toggle">ç‚¹å‡»æ­¤å¤„éšè—æ­£æ–‡æ‰€æœ‰é“¾æ¥</button>
<button onclick="toggleVisibilityFoot()" class="box box-green xyx-toggle2">ç‚¹å‡»æ­¤å¤„éšè—æœ¬æ–‡æ‰€æœ‰è„šæ³¨</button>
</center></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:std_version">
<p>æœ¬æ–‡æ‰€å‚è€ƒçš„ standard ç‰ˆæœ¬æ˜¯ N4868 (October 2020 pre-virtual-plenary working draft/C++20 plus editorial changes)ï¼Œè¿™å¹¶ä¸æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ã€‚å‚è€ƒè¯¥ç‰ˆæœ¬çš„ä¸»è¦è€ƒé‡æ˜¯é˜²æ­¢å¯èƒ½çš„æ›´æ–°å¯¼è‡´é“¾æ¥å¤±æ•ˆã€‚&#160;<a class="footnote-backref" href="#fnref:std_version" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:class-specifier">
<p>class-specifier åœ¨è¿™é‡Œç”¨åˆ°ï¼š<a href="https://timsong-cpp.github.io/cppwp/n4868/dcl.type.general#1">dcl.type.general#1</a>&#160;<a class="footnote-backref" href="#fnref:class-specifier" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:class-name">
<p>class-name è¿˜å¯èƒ½æ˜¯ä¸€ä¸ª simple-template-idï¼Œå³æ¨¡æ¿ç‰¹åŒ–ã€‚&#160;<a class="footnote-backref" href="#fnref:class-name" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:refer_to_same">
<p>å¦‚æœå°†ä»£ç ä¸­ L7 æåˆ° L5 ä¹‹å‰ï¼ŒGCC ä¼šå‡ºç°æŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºï¼š<a href="https://timsong-cpp.github.io/cppwp/n4868/basic.scope.class#2">basic.scope.class#2</a>: A name N used in a class S shall refer to the same declaration in its context and when re-evaluated in the completed scope of S. No diagnostic is required for a violation of this rule.&#160;<a class="footnote-backref" href="#fnref:refer_to_same" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:nonzero_size">
<p>å…³äºè¾“å‡ºä¸­çš„ 1ï¼š<a href="https://timsong-cpp.github.io/cppwp/n4868/class.pre#6">class.pre#6</a>: Complete objects of class type have nonzero size. Base class subobjects and members declared with the no_Â­unique_Â­address attribute are not so constrained.&#160;<a class="footnote-backref" href="#fnref:nonzero_size" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:structural">
<p>ä½† layout capability rules å…è®¸äº† low-level çš„å¼ºè½¬ã€‚&#160;<a class="footnote-backref" href="#fnref:structural" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:noexcept-specifier">
<p>è¿˜æœ‰ noexcept-specifier&#160;<a class="footnote-backref" href="#fnref:noexcept-specifier" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
<li id="fn:scope">
<p>æ³¨æ„ï¼Œä½œç”¨åŸŸå®šä¹‰ä¸ºã€Œthe largest part of the program in which that name is valid, that is, in which that name may be used as an <strong>unqualified name</strong> to refer to the same entity<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/basic.scope.declarative#1">basic.scope.declarative#1</a></sup>.ã€&#160;<a class="footnote-backref" href="#fnref:scope" title="Jump back to footnote 8 in the text">&#8617;</a></p>
</li>
<li id="fn:redeclaration">
<p>è§é—®é¢˜ï¼š <a href="https://stackoverflow.com/questions/75402077/which-subclause-of-c-standard-prohibits-redeclaration-redefinition-in-a-same">Which subclause of C++ standard prohibits redeclaration / redefinition in a same block?</a>ï¼Œå·²ç»è§£å†³ã€‚&#160;<a class="footnote-backref" href="#fnref:redeclaration" title="Jump back to footnote 9 in the text">&#8617;</a></p>
</li>
<li id="fn:class-scope">
<p>åœ¨ N4868 é‡Œï¼Œè¿™é‡Œè§£é‡Šä¸ºï¼šå½“ä¸€ä¸ªåå­—åœ¨ç±»å†…è¢«å®šä¹‰åï¼Œç±»å†…çš„å‰©ä½™éƒ¨åˆ†<sup><a href="https://timsong-cpp.github.io/cppwp/n4868/basic.scope.pdecl#6">basic.scope.pdecl#6</a></sup>åŠè¯¥ç±»çš„æˆå‘˜å‡½æ•°çš„å‡½æ•°ä½“ã€default argument ä»¥åŠ default member initializerï¼ˆåä¸¤è€…ä¼šåœ¨åé¢è®²è§£ï¼‰<sup id="fnref:noexcept-specifier"><a class="footnote-ref" href="#fn:noexcept-specifier">7</a></sup><sup><a href="https://timsong-cpp.github.io/cppwp/n4868/class.mem.general#6">class.mem.general#6</a></sup>æˆä¸ºå…¶ä½œç”¨åŸŸ<sup id="fnref:scope"><a class="footnote-ref" href="#fn:scope">8</a></sup><sup><a href="https://timsong-cpp.github.io/cppwp/n4868/basic.scope.class#1">basic.scope.class#1</a></sup>ã€‚åœ¨æœ€æ–°ç‰ˆï¼ˆå†™æœ¬æ–‡æ—¶ï¼Œä¸º 2023-01-02ï¼‰ä¸­ï¼Œscope çš„å®šä¹‰å‘ç”Ÿäº†è¾ƒå¤§æ›´æ”¹ã€‚&#160;<a class="footnote-backref" href="#fnref:class-scope" title="Jump back to footnote 10 in the text">&#8617;</a></p>
</li>
<li id="fn:name_hiding">
<p>åœ¨æœ€æ–°ç‰ˆæœ¬é‡Œï¼Œname hiding ä¸€èŠ‚ä¹Ÿæ²¡æœ‰äº†ã€‚å¯ä»¥åœ¨ <a href="https://timsong-cpp.github.io/cppwp/basic.scope.pdecl#2">basic.scope.pdecl#2</a> æ‰¾åˆ°ç›¸å…³æè¿°ã€‚&#160;<a class="footnote-backref" href="#fnref:name_hiding" title="Jump back to footnote 11 in the text">&#8617;</a></p>
</li>
<li id="fn:class_member">
<p>è¿˜èƒ½æœ‰ using-declarations, static_assert declarations, member template declarations, deduction guides (C++17), Using-enum-declarations (C++20)&#160;<a class="footnote-backref" href="#fnref:class_member" title="Jump back to footnote 12 in the text">&#8617;</a></p>
</li>
<li id="fn:this">
<p>implicit object parameter çš„å®é™…ç”¨é€”æ˜¯é‡è½½è§£æï¼Œæ— è®ºæ˜¯å¦ static éƒ½ä¼šè¢«è§†ä¸ºæœ‰è¿™ä¸ªæˆå‘˜ï¼Œè§ <a href="https://stackoverflow.com/a/72534617/14430730">è¿™ä¸ªå›ç­”</a>ã€‚ä½†æ˜¯ static æˆå‘˜å‡½æ•°æ²¡æœ‰ <code>this</code>ã€‚åªæœ‰æ„é€ å‡½æ•°æ²¡æœ‰ implicit object parameterã€‚&#160;<a class="footnote-backref" href="#fnref:this" title="Jump back to footnote 13 in the text">&#8617;</a></p>
</li>
<li id="fn:copy_ctor">
<p>éƒ¨åˆ†å¯¹ C++ æœ‰åŸºç¡€äº†è§£çš„è¯»è€…å¯èƒ½ä¼šè®¤ä¸ºï¼Œç”¨è¿™é‡Œè¿”å›çš„ä¸´æ—¶å¯¹è±¡æ¥æ„é€  <code>c1</code> æˆ–è€… <code>c2</code> æ—¶æœ‰å¯èƒ½è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°ã€‚è¿™åœ¨æ—©æœŸ C++ ä¸­æ˜¯æœ‰å¯èƒ½çš„ï¼Œä½†æ˜¯è‡ª C++17 å¼ºåˆ¶ copy elision ä¹‹åæ‹·è´æ„é€ å‡½æ•°çš„è°ƒç”¨ä¸ä¼šå‘ç”Ÿï¼Œè€Œæ˜¯å¿…å®šç­‰ä»·äº <code>Container c1;</code> å’Œ <code>Container c2(64);</code>ã€‚æˆ‘ä»¬ä¼šåœ¨è®¨è®ºæ‹·è´æ„é€ æ—¶è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚&#160;<a class="footnote-backref" href="#fnref:copy_ctor" title="Jump back to footnote 14 in the text">&#8617;</a></p>
</li>
<li id="fn:initializer">
<p>è¿˜æœ‰ braced-init-listã€‚æˆ‘ä»¬åœ¨åé¢è®¨è®ºã€‚&#160;<a class="footnote-backref" href="#fnref:initializer" title="Jump back to footnote 15 in the text">&#8617;</a></p>
</li>
<li id="fn:equal-initializer">
<p>å…³äºç±»ä½¿ç”¨ <code>Foo f = expr;</code> å½¢å¼çš„åˆå§‹åŒ–çš„è¡Œä¸ºï¼Œæˆ‘ä»¬åœ¨è®¨è®ºå®Œæ‹·è´æ„é€ å‡½æ•°å’Œè½¬æ¢æ„é€ å‡½æ•°ä¹‹åå†è®¨è®ºã€‚&#160;<a class="footnote-backref" href="#fnref:equal-initializer" title="Jump back to footnote 16 in the text">&#8617;</a></p>
</li>
<li id="fn:namespace-scope">
<p>å‡†ç¡®åœ°è¯´ï¼Œå‡½æ•°å¯ä»¥åœ¨ namespace scope æˆ–è€… class scope è¢«å®šä¹‰ã€‚è¿™é‡Œæ²¡æœ‰å¼•å…¥ namespace çš„æ¦‚å¿µæ‰€ä»¥æš‚æ—¶ä¸ç”¨è¿™ä¸ªæœ¯è¯­ã€‚&#160;<a class="footnote-backref" href="#fnref:namespace-scope" title="Jump back to footnote 17 in the text">&#8617;</a></p>
</li>
<li id="fn:overload_resolution">
<p><a href="https://en.cppreference.com/w/cpp/language/overload_resolution">Overload Resolution</a>, <a href="https://timsong-cpp.github.io/cppwp/n4868/over">over</a>&#160;<a class="footnote-backref" href="#fnref:overload_resolution" title="Jump back to footnote 18 in the text">&#8617;</a></p>
</li>
<li id="fn:rank_of_conversion">
<p>äº‹å®ä¸Šï¼Œè½¬æ¢æœ‰ä¸‰ä¸ªç­‰çº§ï¼Œåˆ†åˆ«æ˜¯ exact match, promotion å’Œ conversionã€‚è¿™é‡Œ int-&gt;long å’Œ int-&gt;float éƒ½å±äº conversionã€‚å‚è§<a href="https://en.cppreference.com/w/cpp/language/overload_resolution#Ranking_of_implicit_conversion_sequences">Ranking of implicit conversion sequences</a>&#160;<a class="footnote-backref" href="#fnref:rank_of_conversion" title="Jump back to footnote 19 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:rank_of_conversion" title="Jump back to footnote 19 in the text">&#8617;</a></p>
</li>
<li id="fn:default_ctor">
<p>å¦‚æœæœ‰æœªæŒ‡æ˜åˆå§‹åŒ–æ–¹å¼çš„å¼•ç”¨æˆå‘˜ã€const æˆå‘˜ï¼Œæˆ–è€… default ctor è¢«åˆ é™¤æˆ–ä¸å¯è®¿é—®çš„æˆå‘˜æˆ–åŸºç±»ç­‰æƒ…å†µä¸‹ï¼Œimplicitly-declared default constructor ä¹Ÿæ˜¯ deleted çš„ã€‚&#160;<a class="footnote-backref" href="#fnref:default_ctor" title="Jump back to footnote 20 in the text">&#8617;</a></p>
</li>
<li id="fn:rule_of_zero">
<p><a href="https://en.cppreference.com/w/cpp/language/rule_of_three">The rule of three / five / zero</a> ä¸€äº›è®¨è®ºä¸­æ¶µç›–äº†ä»€ä¹ˆæ—¶å€™éœ€è¦ææ„å‡½æ•°ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸­å…·ä½“è®¨è®ºç›¸å…³é—®é¢˜ã€‚&#160;<a class="footnote-backref" href="#fnref:rule_of_zero" title="Jump back to footnote 21 in the text">&#8617;</a></p>
</li>
<li id="fn:private_or_deleted_dtor">
<p>æˆ‘ä»¬ä¼šåœ¨åé¢çš„ç« èŠ‚è®¨è®ºå°†ææ„å‡½æ•°è®¾æˆ private æˆ–è€… delete çš„åœºæ™¯ã€‚<a href="https://www.rangakrish.com/index.php/2020/03/04/deleted-destructor-in-c/">è¿™ç¯‡æ–‡ç« </a> ç»™å‡ºäº†ä¸€äº›è§£é‡Šã€‚&#160;<a class="footnote-backref" href="#fnref:private_or_deleted_dtor" title="Jump back to footnote 22 in the text">&#8617;</a></p>
</li>
<li id="fn:call_dtor">
<p><a href="https://stackoverflow.com/a/10082335/14430730">https://stackoverflow.com/a/10082335/14430730</a> æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œè®¨è®ºå®¹å™¨ä¸­å¯¹ placement new å’Œæ‰‹åŠ¨è°ƒç”¨ææ„å‡½æ•°çš„ç”¨é€”ã€‚&#160;<a class="footnote-backref" href="#fnref:call_dtor" title="Jump back to footnote 23 in the text">&#8617;</a></p>
</li>
<li id="fn:thread_storage_duration">
<p>è‡ª C++11 å¼€å§‹ï¼Œè¿˜æœ‰ thread storage durationï¼Œè¿™é‡Œæš‚ç•¥ã€‚ä¸‹é¢çš„è®¨è®ºä¸­ä¹Ÿä¸€æ ·ã€‚&#160;<a class="footnote-backref" href="#fnref:thread_storage_duration" title="Jump back to footnote 24 in the text">&#8617;</a></p>
</li>
<li id="fn:auto">
<p>è¿˜æœ‰ <code>extern</code> å’Œ <code>thread_local</code>ã€‚<a href="https://timsong-cpp.github.io/cppwp/n4868/basic.stc.auto#1">basic.stc.auto#1</a>&#160;<a class="footnote-backref" href="#fnref:auto" title="Jump back to footnote 25 in the text">&#8617;</a></p>
</li>
<li id="fn:auto_opt">
<p><a href="https://timsong-cpp.github.io/cppwp/n4868/basic.stc.auto#3">basic.stc.auto#3</a> If a variable with automatic storage duration has initialization or a destructor with side effects, an implementation shall not destroy it before the end of its block nor eliminate it as an optimization, even if it appears to be unused, except that a class object or its copy/move may be eliminated as specified in [class.copy.elision].&#160;<a class="footnote-backref" href="#fnref:auto_opt" title="Jump back to footnote 26 in the text">&#8617;</a></p>
</li>
<li id="fn:static_local">
<p>è¿™æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™ä¼šå¸¦æ¥é¢å¤–çš„è¿è¡Œæ—¶å¼€é”€ï¼Œå‚è§ <a href="https://stackoverflow.com/questions/23829389/does-a-function-local-static-variable-automatically-incur-a-branch">Does a function local static variable automatically incur a branch?</a>ã€‚&#160;<a class="footnote-backref" href="#fnref:static_local" title="Jump back to footnote 27 in the text">&#8617;</a></p>
</li>
</ol>
</div>

  <hr>
<div class="md-source-file">
  <small>
    
      æœ€åæ›´æ–°:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2023-03-21T05:20:07+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-03-21</span>
      
        <br>
        åˆ›å»ºæ—¥æœŸ:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2023-02-08T16:33:32+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-02-08</span>
      
    
  </small>
</div>


  



<div id="__comments">

<h3>é¢œè‰²ä¸»é¢˜è°ƒæ•´</h3>

<div class="tx-switch">
<button data-md-color-scheme="default"><code>default</code></button>
<button data-md-color-scheme="slate"><code>slate</code></button>
</div>

<script>
var buttons = document.querySelectorAll("button[data-md-color-scheme]")
buttons.forEach(function(button) {
        button.addEventListener("click", function() {
        var attr = this.getAttribute("data-md-color-scheme")
        document.body.setAttribute("data-md-color-scheme", attr)
        localStorage.setItem("data-md-color-scheme",attr);
        updateScheme();
        })
})
</script>

<div class="tx-switch">
<button class="button1" data-md-color-primary="red" style="background-color:red">red</button>
<button class="button1" data-md-color-primary="pink" style="background-color:pink;color:black">pink</button>
<button class="button1" data-md-color-primary="purple" style="background-color:purple">purple</button>
<button class="button1" data-md-color-primary="indigo" style="background-color:indigo">indigo</button>
<button class="button1" data-md-color-primary="blue" style="background-color:blue">blue</button>
<button class="button1" data-md-color-primary="cyan" style="background-color:cyan;color:black">cyan</button>
<button class="button1" data-md-color-primary="teal" style="background-color:teal">teal</button>
<button class="button1" data-md-color-primary="green" style="background-color:green">green</button>
<button class="button1" data-md-color-primary="lime" style="background-color:lime;color:black">lime</button>
<button class="button1" data-md-color-primary="orange" style="background-color:orange;color:black">orange</button>
<button class="button1" data-md-color-primary="brown" style="background-color:brown;border-radius=3px">brown</button>
<button class="button1" data-md-color-primary="grey" style="background-color:grey">grey</button>
<button class="button1" data-md-color-primary="black" style="background-color:black">black</button>
<button class="button1" data-md-color-primary="white" style="background-color:white;color:black">white</button>
</div>

<script>
var buttons = document.querySelectorAll("button[data-md-color-primary]")
buttons.forEach(function(button) {
        button.addEventListener("click", function() {
        var attr = this.getAttribute("data-md-color-primary")
        document.body.setAttribute("data-md-color-primary", attr)
        localStorage.setItem("data-md-color-primary",attr);
        })
})
</script>

<h2 ><!-- è¯„è®º -->è¯„è®ºåŒº~</h2>

æœ‰ç”¨çš„è¯è¯·ç»™æˆ‘ä¸ªèµå’Œ star => <a href="https://github.com/xuan-insr/xuan-insr.github.io"><img alt="GitHub stars" src="https://img.shields.io/github/stars/xuan-insr/xuan-insr.github.io.svg?style=plastic&amp;label=Stars"></a>

</br>

å¿«æ¥è·Ÿæˆ‘èŠå¤©~

</div>

<script src="https://giscus.app/client.js"
        data-repo="xuan-insr/discussion"
        data-repo-id="R_kgDOIUW7XA"
        data-category="General"
        data-category-id="DIC_kwDOIUW7XM4CSOC3"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="dark"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>

updateScheme();

</script>

<!-- Synchronize Giscus theme with palette -->
<script>
var giscus = document.querySelector("script[src*=giscus]")

/* Set palette on initial load */
// var palette = __md_get("__palette")
// if (palette && typeof palette.color === "object") {
//     var theme = palette.color.scheme === "slate" ? "dark" : "light"
//     giscus.setAttribute("data-theme", theme) 
// }

/* Register event handlers after documented loaded */
// document.addEventListener("DOMContentLoaded", function() {
//     var ref = document.querySelector("[data-md-component=palette]")
//     ref.addEventListener("change", function() {
//     var palette = __md_get("__palette")
//     if (palette && typeof palette.color === "object") {
//         var theme = palette.color.scheme === "slate" ? "dark" : "light"

//         /* Instruct Giscus to change theme */
//         var frame = document.querySelector(".giscus-frame")
//         frame.contentWindow.postMessage(
//         { giscus: { setConfig: { theme } } },
//         "https://giscus.app"
//         )
//     }
//     })
// })
</script>
                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            å›åˆ°é¡µé¢é¡¶éƒ¨
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      æœ¬é¡µé¢çš„å…¨éƒ¨å†…å®¹åœ¨ <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC BY-SA 4.0</a> å’Œ <a href="https://github.com/zTrix/sata-license">SATA</a> åè®®ä¹‹æ¡æ¬¾ä¸‹æä¾›ï¼Œé™„åŠ æ¡æ¬¾äº¦å¯èƒ½åº”ç”¨
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "content.code.annotate", "navigation.tracking", "navigation.indexes", "navigation.top", "toc.follow"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.efa0ade1.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../../from_oi_wiki/js/extra.js"></script>
      
        <script src="../../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../../../js/tablesort.js"></script>
      
    
  </body>
</html>